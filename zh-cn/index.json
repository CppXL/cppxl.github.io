[{"uri":"https://www.ch35tnut.site/zh-cn/vulnerability/windows-clfs-eop/","title":"Windows CLFS EoP","tags":[],"description":"","content":"Chapter X Some Chapter title åºå· æ¼æ´å ç¼–å· ç±»å‹ 2 windows CLFS æƒé™æå‡æ¼æ´ CVE-2023-28252 æƒé™æå‡ 1 windows CLFS æƒé™æå‡æ¼æ´ CVE-2022-37969 æƒé™æå‡ "},{"uri":"https://www.ch35tnut.site/zh-cn/research/windows/","title":"Windows","tags":[],"description":"","content":"Chapter X Some Chapter title Lorem Ipsum.\n"},{"uri":"https://www.ch35tnut.site/zh-cn/research/protocol/ntlm/","title":"Ntlm åè®®","tags":[],"description":"","content":"Chapter X Some Chapter title Lorem Ipsum.\n"},{"uri":"https://www.ch35tnut.site/zh-cn/research/protocol/","title":"åè®®","tags":[],"description":"","content":"Chapter X Some Chapter title Lorem Ipsum.\n"},{"uri":"https://www.ch35tnut.site/zh-cn/research/web/","title":"Web","tags":[],"description":"","content":"web Webå®‰å…¨ç ”ç©¶ç›¸å…³\n"},{"uri":"https://www.ch35tnut.site/zh-cn/research/code-audit/","title":"ä»£ç å®¡è®¡","tags":[],"description":"","content":"ä»£ç å®¡è®¡ "},{"uri":"https://www.ch35tnut.site/zh-cn/research/protocol/kerberos/kerberos-in-windows/","title":"Windowsä¸­çš„kerberosåè®®","tags":[],"description":"","content":"Chapter X Some Chapter title Lorem Ipsum.\n"},{"uri":"https://www.ch35tnut.site/zh-cn/research/protocol/kerberos/","title":"Kerberos åè®®","tags":[],"description":"","content":"kerberosåè®®ç ”ç©¶ "},{"uri":"https://www.ch35tnut.site/zh-cn/research/windows/dll-inject/","title":"Dllæ³¨å…¥","tags":[],"description":"","content":"Dllæ³¨å…¥ç ”ç©¶ "},{"uri":"https://www.ch35tnut.site/zh-cn/misc/tunnel/transport-layer/socks/","title":"Socksåè®®","tags":[],"description":"","content":"Chapter X Some Chapter title Lorem Ipsum.\n"},{"uri":"https://www.ch35tnut.site/zh-cn/misc/tunnel/","title":"éš§é“","tags":[],"description":"","content":"Chapter X Some Chapter title Lorem Ipsum.\n"},{"uri":"https://www.ch35tnut.site/zh-cn/misc/tunnel/application-layer/","title":"åº”ç”¨å±‚éš§é“","tags":[],"description":"","content":"Chapter X Some Chapter title Lorem Ipsum.\n"},{"uri":"https://www.ch35tnut.site/zh-cn/misc/tunnel/transport-layer/","title":"ä¼ è¾“å±‚éš§é“","tags":[],"description":"","content":"Chapter X Some Chapter title Lorem Ipsum.\n"},{"uri":"https://www.ch35tnut.site/zh-cn/misc/tunnel/network-layer/","title":"ç½‘ç»œå±‚éš§é“","tags":[],"description":"","content":"Chapter X Some Chapter title Lorem Ipsum.\n"},{"uri":"https://www.ch35tnut.site/zh-cn/research/","title":"å®‰å…¨ç ”ç©¶","tags":[],"description":"","content":"å®‰å…¨ç ”ç©¶ "},{"uri":"https://www.ch35tnut.site/zh-cn/research/windows/pe/","title":"Pe","tags":[],"description":"","content":"Chapter X Some Chapter title Lorem Ipsum.\n"},{"uri":"https://www.ch35tnut.site/zh-cn/vulnerability/","title":"æ¼æ´åˆ†æ","tags":[],"description":"","content":"æ¼æ´åˆ†æ åºå· æ¼æ´å ç¼–å· ç±»å‹ 1 windows æƒé™æå‡æ¼æ´ CVE-2021-40449 æƒé™æå‡ "},{"uri":"https://www.ch35tnut.site/zh-cn/","title":"é¦–é¡µ","tags":[],"description":"","content":"å­¦ä¹ è®°å½• è®°å½•ä¸€äº›å¹³æ—¶å­¦ä¹ å’Œç”Ÿæ´»çš„æ—¥å¸¸ã€‚\n09-13è‡³09-16\r| 260 days ago\rè¿™å‘¨å†å†™ä¸€ä¸ªåŸºäºrustçš„loaderï¼Œå†™äº†ä¸€åŠå‘ç°åŠ è½½çš„dllå¤ªå¤šäº†ï¼Œå†æƒ³åŠæ³•ç”¨åŠ¨æ€åŠ è½½çš„æ–¹å¼åŠ è½½dllï¼Œæ„Ÿè§‰ç”¨ruståšæœ‰ç‚¹éš¾ã€‚\nç”¨rustçš„å†…è”æ±‡ç¼–è·å–åˆ°äº†kernel32.dllå’Œntdll.dllçš„åŸºå€ï¼Œè¿˜è¦ç»§ç»­å®Œå–„ã€‚\n2023\r09-10è‡³09-12\r2 days | 263 days ago\rä¸­ç§‹èŠ‚ï¼Œåœ¨å®¶æ‘¸äº†å‡ å¤©ğŸŸï¼Œå•¥éƒ½æ²¡å¹²\n2023\r09-05è‡³09-09\r4 days | 268 days ago\rè¿™å‘¨ç¼–è¯‘äº†wireshark 1.8.5ï¼Œé€šè¿‡diff1.8.5å’Œ1.8.6çš„æºç æ‰¾å‡º1.8.5é‡Œé¢çš„æ¼æ´ï¼Œè§\rwireshark 1.8.5ä»£ç å®¡è®¡\n2023\r09-03è‡³09-04\r1 day | 270 days ago\rè¿™ä¸¤å¤©ï¼Œç»™hugoä¸»é¢˜å¢åŠ äº†timelineçš„shortcodeï¼Œè§\rå¢åŠ timelineåŠŸèƒ½\n2023\r08-29è‡³09-02\r4 days | 275 days ago\rå‘¨å†…çœ‹äº†ä¸€ä¸ªå‡ ç™¾è¡Œçš„ä»£ç ï¼Œè§\rnews_serverå®¡è®¡\n2023\r"},{"uri":"https://www.ch35tnut.site/zh-cn/dailylife/","title":"ç”Ÿæ´»éšç¬”","tags":[],"description":"","content":"Chapter X Some Chapter title Lorem Ipsum.\n"},{"uri":"https://www.ch35tnut.site/zh-cn/misc/","title":"æ‚é¡¹","tags":[],"description":"","content":"æ‚é¡¹ æš‚æ— \n"},{"uri":"https://www.ch35tnut.site/zh-cn/others/","title":"å…¶ä»–","tags":[],"description":"","content":"å…¶ä»– "},{"uri":"https://www.ch35tnut.site/zh-cn/vulnerability/proxy-not-shell/","title":"Proxy Not Shell","tags":[],"description":"","content":"æ¼æ´ç¯å¢ƒ Windows Server 2019 Windows Exchange 2019 CU9 æ¼æ´åˆ†æ æ¼æ´é“¾åŒ…å«äº†ä¸¤ä¸ªæ¼æ´ï¼š\nCVE-2022-41040 Exchange æƒé™æå‡æ¼æ´ CVE-2022-41082 Exchange è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ CVE-2022-41040 æ˜¯ProxyShellä¿®å¤ä¸å®Œå…¨çš„äº§ç‰©ï¼Œåœ¨ProxyShellåˆ©ç”¨é“¾ä¸­æ— éœ€èº«ä»½éªŒè¯å°±å¯ä»¥é€šè¿‡autodiscover.jsonè¯·æ±‚åˆ°/PowerShellæ¥å£ï¼Œåœ¨CVE-2022-41040 ä¸­ï¼Œä»…éœ€è¦ä½æƒé™èº«ä»½éªŒè¯å°±å¯ä»¥è¯·æ±‚åˆ°è¯¥æ¥å£ï¼Œé€šè¿‡SSRFå°†ä½æƒé™è½¬æ¢ä¸ºé«˜æƒé™ã€‚\nCVE-2022-41082æ˜¯Exchangeçš„ååºåˆ—åŒ–æ¼æ´ï¼Œé€šè¿‡ä¼ å…¥æ¶æ„åºåˆ—åŒ–æ•°æ®ï¼Œä½¿å¾—Exchangeè§¦å‘èƒ½å¤Ÿé€ æˆä»£ç æ‰§è¡Œçš„ååºåˆ—åŒ–è¿‡ç¨‹ï¼Œå°†æŒ‡å®šæ•°æ®ååºåˆ—åŒ–åˆ°æ¶æ„ç±»ï¼Œä»è€Œåœ¨ExchangeæœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„ä»£ç ã€‚\nåœ¨PoCä¸­å‘é€äº†ä»¥ä¸‹ä¸‰ç§ç±»å‹çš„PSRPæ¶ˆæ¯\n0x00010002 SESSION_CAPABILITY\nSESSION_CAPABILITY åº”è¯¥æ˜¯åˆ›å»ºRunspacePool\n0x00010004 INIT_RUNSPACEPOOL\nINIT_RUNSPACEPOOL åº”è¯¥æ˜¯åˆå§‹åŒ–RunspacePool\n0x00021006 CREATE_PIPELINE\nåˆ›å»ºå‘½ä»¤ç®¡é“å¹¶åœ¨æŒ‡å®šçš„ RunspacePool ä¸­è°ƒç”¨å®ƒ\nPoCé€šè¿‡PSRPåè®®åˆ›å»ºäº†è¿œç¨‹PowerShellç®¡é“ï¼Œå¹¶è¯•å›¾åœ¨è¿™ä¸ªç®¡é“å†…æ‰§è¡ŒNew-OfflineAddressBookè¿™ä¸ªcmdletï¼Œå¹¶å°†å¯¹åº”çš„åºåˆ—åŒ–æ•°æ®ä¼ ç»™äº†Exchangeã€‚\nPoCä¸»è¦ç»„æˆéƒ¨åˆ†å¦‚ä¸‹æ‰€ç¤ºï¼ŒBAæ ‡ç­¾å†…æ˜¯base64ç¼–ç çš„åºåˆ—åŒ–System.UnitySerializationHolderå¯¹è±¡\n\u0026lt;Obj N=\u0026#34;V\u0026#34; RefId=\u0026#34;14\u0026#34;\u0026gt; \u0026lt;TN RefId=\u0026#34;2\u0026#34;\u0026gt; \u0026lt;T\u0026gt;System.ServiceProcess.ServiceController\u0026lt;/T\u0026gt; \u0026lt;T\u0026gt;System.Object\u0026lt;/T\u0026gt; \u0026lt;/TN\u0026gt; \u0026lt;ToString\u0026gt;System.ServiceProcess.ServiceController\u0026lt;/ToString\u0026gt; \u0026lt;Props\u0026gt; \u0026lt;S N=\u0026#34;Name\u0026#34;\u0026gt;Type\u0026lt;/S\u0026gt; \u0026lt;Obj N=\u0026#34;TargetTypeForDeserialization\u0026#34;\u0026gt; \u0026lt;TN RefId=\u0026#34;2\u0026#34;\u0026gt; \u0026lt;T\u0026gt;System.Exception\u0026lt;/T\u0026gt; \u0026lt;T\u0026gt;System.Object\u0026lt;/T\u0026gt; \u0026lt;/TN\u0026gt; \u0026lt;MS\u0026gt; \u0026lt;BA N=\u0026#34;SerializationData\u0026#34;\u0026gt;AAEAAAD/////AQAAAAAAAAAEAQAAAB9TeXN0ZW0uVW5pdHlTZXJpYWxpemF0aW9uSG9sZGVyAwAAAAREYXRhCVVuaXR5VHlwZQxBc3NlbWJseU5hbWUBAAEIBgIAAAAgU3lzdGVtLldpbmRvd3MuTWFya3VwLlhhbWxSZWFkZXIEAAAABgMAAABYUHJlc2VudGF0aW9uRnJhbWV3b3JrLCBWZXJzaW9uPTQuMC4wLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49MzFiZjM4NTZhZDM2NGUzNQs=\u0026lt;/BA\u0026gt; \u0026lt;/MS\u0026gt; \u0026lt;/Obj\u0026gt; \u0026lt;/Props\u0026gt; \u0026lt;S\u0026gt; \u0026lt;![CDATA[\u0026lt;ResourceDictionary xmlns=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026#34; xmlns:x=\u0026#34;http://schemas.microsoft.com/winfx/2006/xaml\u0026#34; xmlns:System=\u0026#34;clr-namespace:System;assembly=mscorlib\u0026#34; xmlns:Diag=\u0026#34;clr-namespace:System.Diagnostics;assembly=system\u0026#34;\u0026gt;\u0026lt;ObjectDataProvider x:Key=\u0026#34;LaunchCalch\u0026#34; ObjectType=\u0026#34;{x:Type Diag:Process}\u0026#34; MethodName=\u0026#34;Start\u0026#34;\u0026gt;\u0026lt;ObjectDataProvider.MethodParameters\u0026gt;\u0026lt;System:String\u0026gt;cmd.exe\u0026lt;/System:String\u0026gt;\u0026lt;System:String\u0026gt;/c whoami\u0026gt; c:\\users\\public\\1.txt\u0026lt;/System:String\u0026gt; \u0026lt;/ObjectDataProvider.MethodParameters\u0026gt; \u0026lt;/ObjectDataProvider\u0026gt; \u0026lt;/ResourceDictionary\u0026gt;]]\u0026gt; \u0026lt;/S\u0026gt; \u0026lt;/Obj\u0026gt; XamlReader.Parse() BAæ ‡ç­¾æ•°æ® .....Ã¿Ã¿Ã¿Ã¿..............System.UnitySerializationHolder..... Data\tUnityType.AssemblyName......... System.Windows.Markup.XamlReader......... XPresentationFramework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35. PoCéƒ¨åˆ†ç”±ä¸¤ä¸ªå¯¹è±¡åµŒå¥—è€Œæˆï¼Œå¤§è‡´ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š\nObj V(System.ServiceProcess.ServiceController): String Name=\u0026#34;Type\u0026#34; Obj TargetTypeForDeserialization(System.Exception): ByteArray SerializationData String SerializationData ä»£ç é€»è¾‘\nä»£ç é€»è¾‘å¦‚ä¸‹å›¾\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?\u003e\r\u003c!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"\u003e\rèƒŒæ™¯ 1\rCenter Gradient\ré¡µ-1\ræµç¨‹\rReadOneObject\rReadOneObject\tæµç¨‹.8\rReadOneDeserializedObject éå†XMLæ ‘çš„æ ‡ç­¾\rReadOneDeserializedObjectéå†XMLæ ‘çš„æ ‡ç­¾\tåŠ¨æ€è¿æ¥çº¿\rè°ƒç”¨è¯»å–ä¸€ä¸ªååºåˆ—åŒ–å¯¹è±¡ object obj = this.ReadOneDeserializedObject\rè°ƒç”¨ï¼Œè¯»å–ä¸€ä¸ªååºåˆ—åŒ–å¯¹è±¡object obj = this.ReadOneDeserializedObject\tåŠ¨æ€è¿æ¥çº¿.12\rç¢°åˆ°Objæ ‡ç­¾è°ƒç”¨è¯»å–ä¸€ä¸ªObjå¯¹è±¡ if (this.IsNextElement(\u0026#34;Obj\u0026#34;)){ return thi...\rç¢°åˆ°Objæ ‡ç­¾ï¼Œè°ƒç”¨ï¼Œè¯»å–ä¸€ä¸ªObjå¯¹è±¡if (this.IsNextElement(\u0026#34;Obj\u0026#34;)){return this.ReadPSObject();}\tæµç¨‹.11\rReadPSObject è¯»å–ä¸€ä¸ªObjå¯¹è±¡\rReadPSObjectè¯»å–ä¸€ä¸ªObjå¯¹è±¡\tåŠ¨æ€è¿æ¥çº¿.14\rç¢°åˆ°Propsæ ‡ç­¾è°ƒç”¨è¯»å–Propsæ ‡ç­¾ if (this.IsNextElement(\u0026#34;Props\u0026#34;)){ this.R...\rç¢°åˆ°Propsæ ‡ç­¾ï¼Œè°ƒç”¨ï¼Œè¯»å–Propsæ ‡ç­¾if (this.IsNextElement(\u0026#34;Props\u0026#34;)){this.ReadProperties(psobject);}\tæµç¨‹.13\rReadProperties\rReadProperties\tåŠ¨æ€è¿æ¥çº¿.16\rè°ƒç”¨è¯»å–åµŒå¥—å¯¹è±¡\rè°ƒç”¨ï¼Œè¯»å–åµŒå¥—å¯¹è±¡\tæµç¨‹.15\rReadOneObject\rReadOneObject\tåŠ¨æ€è¿æ¥çº¿.20\rè°ƒç”¨å°†ååºåˆ—åŒ–æ•°æ® è½¬æ¢ä¸ºç›®æ ‡ç±»å‹æ­¤æ—¶ç›®æ ‡ç±»å‹ä¸ºSystem.Exception\rè°ƒç”¨ï¼Œå°†ååºåˆ—åŒ–æ•°æ®è½¬æ¢ä¸ºç›®æ ‡ç±»å‹ï¼Œæ­¤æ—¶ç›®æ ‡ç±»å‹ä¸ºSystem.Exception\tæµç¨‹.19\rConvertTo\rConvertTo\tåŠ¨æ€è¿æ¥çº¿.22\rä¸€ç³»åˆ—è°ƒç”¨\rä¸€ç³»åˆ—è°ƒç”¨\tæµç¨‹.21\rObject.Reader.Deserialize\rObject.Reader.Deserialize\tåŠ¨æ€è¿æ¥çº¿.24\rè°ƒç”¨è§£æå†…å­˜ä¸­çš„åºåˆ—åŒ–æ•°æ®\rè°ƒç”¨ï¼Œè§£æå†…å­˜ä¸­çš„åºåˆ—åŒ–æ•°æ®\tæµç¨‹.23\r__BinaryParser.Run\r__BinaryParser.Run\tåŠ¨æ€è¿æ¥çº¿.28\ræµç¨‹.27\rå°†åºåˆ—åŒ–æ•°æ®è§£æä¸ºSystem.UnitySerializationHolderå¯¹è±¡å¹¶è½½å…¥m_assmblyNameå¯¹åº”çš„...\rå°†åºåˆ—åŒ–æ•°æ®è§£æä¸ºSystem.UnitySerializationHolderå¯¹è±¡ï¼Œå¹¶è½½å…¥m_assmblyNameå¯¹åº”çš„DLL\tåŠ¨æ€è¿æ¥çº¿.39\ræµç¨‹.38\rè½¬åŒ–ä¸ºåœ¨m_assmblyNameå¯¹åº”çš„DLLä¸­çš„m_dataå¯¹åº”ç±»å‹çš„Typeå¯¹è±¡\rè½¬åŒ–ä¸ºåœ¨m_assmblyNameå¯¹åº”çš„DLLä¸­çš„m_dataå¯¹åº”ç±»å‹çš„Typeå¯¹è±¡\tåŠ¨æ€è¿æ¥çº¿.41\rä¸€ç³»åˆ—è¿”å›\rä¸€ç³»åˆ—è¿”å›\tåŠ¨æ€è¿æ¥çº¿.43\ræµç¨‹.42\rå°†ConverToè¿”å›çš„Typeå¯¹è±¡åŠ å…¥.adaptedMembers\rå°†ConverToè¿”å›çš„Typeå¯¹è±¡åŠ å…¥.adaptedMembers\tæµç¨‹.45\rGetTargetTypeForDeserialization\rGetTargetTypeForDeserialization\tæµç¨‹.53\rReadOneDeserializedObject\rReadOneDeserializedObject\tæµç¨‹.54\rReadOneObject\rReadOneObject\tåŠ¨æ€è¿æ¥çº¿.56\råŠ¨æ€è¿æ¥çº¿.57\råŠ¨æ€è¿æ¥çº¿.58\råŠ¨æ€è¿æ¥çº¿.59\rè°ƒç”¨\rè°ƒç”¨\tåŠ¨æ€è¿æ¥çº¿.61\ræµç¨‹.60\rGetPSStandardMember\rGetPSStandardMember\tåŠ¨æ€è¿æ¥çº¿.63\ræµç¨‹.62\rè¯»å–adaptedMembersçš„TargetTypeForDeserializationå¹¶è¿”å›\rè¯»å–adaptedMembersçš„TargetTypeForDeserializationå¹¶è¿”å›\tåŠ¨æ€è¿æ¥çº¿.66\rè°ƒç”¨å°†å¤–å±‚å¯¹è±¡åºåˆ—åŒ–æ•°æ®\rè°ƒç”¨ï¼Œå°†å¤–å±‚å¯¹è±¡åºåˆ—åŒ–æ•°æ®\tæµç¨‹.65\rLanguagePrimitives.ConvertTo\rLanguagePrimitives.ConvertTo\tåŠ¨æ€è¿æ¥çº¿.69\ræµç¨‹.68\rå°†Sæ ‡ç­¾å†…æ•°æ®è½¬æ¢ä¸ºXamlReaderå¯¹è±¡è§¦å‘ä»£ç æ‰§è¡Œ\rå°†Sæ ‡ç­¾å†…æ•°æ®è½¬æ¢ä¸ºXamlReaderå¯¹è±¡ï¼Œè§¦å‘ä»£ç æ‰§è¡Œ\tåœ¨Exchangeä¸­ï¼Œå…è®¸ååºåˆ—åŒ–çš„ç±»ç™½åå•å’Œç±»ååºåˆ—åŒ–ç›¸å…³ä¿¡æ¯å®šä¹‰åœ¨exchange.partial.types.ps1xmlå’Œexchange.types.ps1xmlç­‰æ–‡ä»¶ä¸­ï¼ŒExchangeä¼šè¯»å–è¿™äº›æ–‡ä»¶ï¼Œåœ¨ååºåˆ—åŒ–æ•°æ®æ—¶ï¼Œä¼špayloadé‡Œé¢çš„ç›®æ ‡ç±»å’Œæ–‡ä»¶é‡Œé¢çš„ç™½åå•ç±»åšå¯¹æ¯”ï¼Œåªæœ‰åœ¨ç™½åå•å†…çš„ç±»æ‰å…è®¸ååºåˆ—åŒ–ã€‚\nPoCç”±åµŒå¥—å¯¹è±¡ç»„æˆï¼Œåœ¨ååºåˆ—åŒ–åµŒå¥—å¯¹è±¡æ—¶ï¼Œä¼šå…ˆååºåˆ—åŒ–é‡Œå±‚å¯¹è±¡ï¼Œè€Œåååºåˆ—åŒ–å¤–å±‚å¯¹è±¡ã€‚åœ¨Exchangååºåˆ—åŒ–PoCçš„é‡Œå±‚å¯¹è±¡æ—¶ï¼Œå°†é€šè¿‡ConvertToå‡½æ•°è½¬æ¢åˆ°ç›®æ ‡ç±»ï¼Œä¼ ç»™ConvertToçš„resultTypeå€¼ä¸ºSystem.Exceptionï¼ŒSystem.Exceptionåœ¨exchange.partial.types.ps1xmlä¸­å®šä¹‰å¦‚ä¸‹ï¼š\n\u0026lt;Type\u0026gt; \u0026lt;Name\u0026gt;System.Exception\u0026lt;/Name\u0026gt; \u0026lt;Members\u0026gt; \u0026lt;CodeProperty IsHidden=\u0026#34;true\u0026#34;\u0026gt; \u0026lt;Name\u0026gt;SerializationData\u0026lt;/Name\u0026gt; \u0026lt;GetCodeReference\u0026gt; \u0026lt;TypeName\u0026gt;Microsoft.Exchange.Data.SerializationTypeConverter\u0026lt;/TypeName\u0026gt; \u0026lt;MethodName\u0026gt;GetSerializationData\u0026lt;/MethodName\u0026gt; \u0026lt;/GetCodeReference\u0026gt; \u0026lt;/CodeProperty\u0026gt; \u0026lt;/Members\u0026gt; \u0026lt;TypeConverter\u0026gt; \u0026lt;TypeName\u0026gt;Microsoft.Exchange.Data.SerializationTypeConverter\u0026lt;/TypeName\u0026gt; \u0026lt;/TypeConverter\u0026gt; \u0026lt;/Type\u0026gt; internal static object ConvertTo(object valueToConvert, Type resultType, bool recursion, IFormatProvider formatProvider, TypeTable backupTypeTable) { object result; using (LanguagePrimitives.typeConversion.TraceScope(\u0026#34;Converting \\\u0026#34;{0}\\\u0026#34; to \\\u0026#34;{1}\\\u0026#34;.\u0026#34;, valueToConvert, resultType)) { if (resultType == null) { throw PSTraceSource.NewArgumentNullException(\u0026#34;resultType\u0026#34;); } bool flag; result = LanguagePrimitives.FigureConversion(valueToConvert, resultType, out flag).Invoke(flag ? PSObject.Base(valueToConvert) : valueToConvert, resultType, recursion, flag ? ((PSObject)valueToConvert) : null, formatProvider, backupTypeTable); } return result; } å…¶å®šä¹‰äº†*\u0026lt;TypeName\u0026gt;Microsoft.Exchange.Data.SerializationTypeConverter\u0026lt;/TypeName\u0026gt;ï¼ŒExchangeå°†é€šè¿‡Microsoft.Exchange.Data.SerializationTypeConverter*ç±»å¯¹é‡Œå±‚åºåˆ—åŒ–æ•°æ®è¿›è¡Œååºåˆ—åŒ–ã€‚Microsoft.Exchange.Data.SerializationTypeConverterç»è¿‡ä¸€ç³»åˆ—è°ƒç”¨ï¼Œæœ€ç»ˆç”±System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserializeæ–¹æ³•è¿›è¡Œååºåˆ—åŒ–ã€‚\nåœ¨è¯¥æ–¹æ³•ä¼šè°ƒç”¨System.Runtime.Serialization.Formatters.Binary.__BinaryParser.Runï¼Œè¿™æ–¹æ³•ä¼šå¾ªç¯è¯»å–å†…å­˜ä¸­çš„é‡Œå±‚å¯¹è±¡çš„åºåˆ—åŒ–æ•°æ®ï¼Œå°†å…¶è½¬æ¢ä¸ºSystem.UnitySerializationHolderå¯¹è±¡ã€‚\nä¹‹åExchangeä¼šé€šè¿‡Assembly.LoadFromè½½å…¥*System.UnitySerializationHolder.m_assemblyNameæ‰€æŒ‡æ˜çš„DLLï¼Œå¹¶ä¸”è¿”å›System.UnitySerializationHolder.m_data*ç±»å‹çš„Typeå¯¹è±¡ã€‚\ninternal object Deserialize(HeaderHandler handler, __BinaryParser serParser, bool fCheck, bool isCrossAppDomain, IMethodCallMessage methodCallMessage) { ...... serParser.Run(); ...... if (!this.bMethodCall \u0026amp;\u0026amp; !this.bMethodReturn) { if (this.TopObject == null) { throw new SerializationException(Environment.GetResourceString(\u0026#34;Serialization_TopObject\u0026#34;)); } if (this.HasSurrogate(this.TopObject.GetType()) \u0026amp;\u0026amp; this.topId != 0L) { this.TopObject = this.m_objectManager.GetObject(this.topId); } if (this.TopObject is IObjectReference) { this.TopObject = ((IObjectReference)this.TopObject).GetRealObject(this.m_context); } } if (this.bFullDeserialization) { this.m_objectManager.RaiseDeserializationEvent(); } if (handler != null) { this.handlerObject = handler(this.headers); } if (this.bMethodCall) { object[] callA = this.TopObject as object[]; this.TopObject = this.binaryMethodCall.ReadArray(callA, this.handlerObject); } else if (this.bMethodReturn) { object[] returnA = this.TopObject as object[]; this.TopObject = this.binaryMethodReturn.ReadArray(returnA, methodCallMessage, this.handlerObject); } return this.TopObject; } åœ¨ä¸€ç³»åˆ—å‡½æ•°è°ƒç”¨è¿”å›åï¼ŒSystem.Management.Automation.InternalDeserializer.ReadPropertiesä¼šå°†System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserializeè¿”å›çš„å¯¹è±¡æ·»åŠ åˆ°PSObject.adaptedMembersä¸­ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¯¥å¯¹è±¡å˜é‡åä¸ºTargetTypeForDeserializationã€‚\nprivate void ReadProperties(PSObject dso) { dso.isDeserialized = true; dso.adaptedMembers = new PSMemberInfoInternalCollection\u0026lt;PSPropertyInfo\u0026gt;(); dso.InstanceMembers.Add(PSObject.dotNetInstanceAdapter.GetDotNetMethod\u0026lt;PSMemberInfo\u0026gt;(dso, \u0026#34;GetType\u0026#34;)); PSGetMemberBinder.SetHasInstanceMember(\u0026#34;GetType\u0026#34;); dso.clrMembers = new PSMemberInfoInternalCollection\u0026lt;PSPropertyInfo\u0026gt;(); if (this.ReadStartElementAndHandleEmpty(\u0026#34;Props\u0026#34;)) { while (this._reader.NodeType == XmlNodeType.Element) { string name = this.ReadNameAttribute(); object serializedValue = this.ReadOneObject(); PSProperty member = new PSProperty(name, serializedValue); dso.adaptedMembers.Add(member); } this.ReadEndElement(); } } åœ¨ååºåˆ—åŒ–å¤–å±‚å¯¹è±¡æ—¶ï¼ŒReadOneObjectä¼šè°ƒç”¨GetTargetTypeForDeserializationè·å–ååºåˆ—åŒ–çš„ç›®æ ‡ç±»å‹ï¼Œå¹¶é€šè¿‡ConvertToè½¬åŒ–ä¸ºè¯¥å¯¹è±¡ã€‚\nåœ¨GetTargetTypeForDeserializationå‡½æ•°ä¸­ï¼Œå°†ä¼šè°ƒç”¨GetPSStandardMemberå¹¶ä¼ å…¥ç¡¬ç¼–ç çš„TargetTypeForDeserializationï¼Œåœ¨GetPSStandardMemberä¸­ä¼šé€šè¿‡TypeTableGetMemberDelegateåˆ›å»ºæˆå‘˜é›†åˆï¼Œå…¶ä¸­åŒ…æ‹¬å­ç±»çš„æˆå‘˜å±æ€§ï¼Œè€ŒååŒ¹é…å…¶ä¸­çš„memberNameé¡¹å¯¹åº”çš„å€¼å¹¶è¿”å›ã€‚æ­¤æ—¶è·å–çš„å€¼ä¸ºXamlReaderç±»å‹çš„Typeå¯¹è±¡ã€‚\ninternal Type GetTargetTypeForDeserialization(TypeTable backupTypeTable) { PSMemberInfo psstandardMember = this.GetPSStandardMember(backupTypeTable, \u0026#34;TargetTypeForDeserialization\u0026#34;); if (psstandardMember != null) { return psstandardMember.Value as Type; } return null; } internal PSMemberInfo GetPSStandardMember(TypeTable backupTypeTable, string memberName) { PSMemberInfo psmemberInfo = null; TypeTable typeTable = (backupTypeTable != null) ? backupTypeTable : this.GetTypeTable(); if (typeTable != null) { PSMemberSet psmemberSet = PSObject.TypeTableGetMemberDelegate\u0026lt;PSMemberSet\u0026gt;(this, typeTable, \u0026#34;PSStandardMembers\u0026#34;); if (psmemberSet != null) { psmemberSet.ReplicateInstance(this); psmemberInfo = new PSMemberInfoIntegratingCollection\u0026lt;PSMemberInfo\u0026gt;(psmemberSet, PSObject.GetMemberCollection(PSMemberViewTypes.All, backupTypeTable))[memberName]; } } if (psmemberInfo == null) { psmemberInfo = (this.InstanceMembers[\u0026#34;PSStandardMembers\u0026#34;] as PSMemberSet); } return psmemberInfo; } å¤–å±‚ç±»ç±»å‹å®šä¹‰ä¸ºSystem.ServiceProcess.ServiceControllerï¼Œå…¶å®šä¹‰åœ¨types.ps1xmlæ–‡ä»¶å†…ï¼Œå®šä¹‰å¦‚ä¸‹ã€‚\n\u0026lt;Type\u0026gt; \u0026lt;Name\u0026gt;System.ServiceProcess.ServiceController\u0026lt;/Name\u0026gt; \u0026lt;Members\u0026gt; \u0026lt;MemberSet\u0026gt; \u0026lt;Name\u0026gt;PSStandardMembers\u0026lt;/Name\u0026gt; \u0026lt;Members\u0026gt; \u0026lt;PropertySet\u0026gt; \u0026lt;Name\u0026gt;DefaultDisplayPropertySet\u0026lt;/Name\u0026gt; \u0026lt;ReferencedProperties\u0026gt; \u0026lt;Name\u0026gt;Status\u0026lt;/Name\u0026gt; \u0026lt;Name\u0026gt;Name\u0026lt;/Name\u0026gt; \u0026lt;Name\u0026gt;DisplayName\u0026lt;/Name\u0026gt; \u0026lt;/ReferencedProperties\u0026gt; \u0026lt;/PropertySet\u0026gt; \u0026lt;/Members\u0026gt; \u0026lt;/MemberSet\u0026gt; \u0026lt;AliasProperty\u0026gt; \u0026lt;Name\u0026gt;Name\u0026lt;/Name\u0026gt; \u0026lt;ReferencedMemberName\u0026gt;ServiceName\u0026lt;/ReferencedMemberName\u0026gt; \u0026lt;/AliasProperty\u0026gt; \u0026lt;AliasProperty\u0026gt; \u0026lt;Name\u0026gt;RequiredServices\u0026lt;/Name\u0026gt; \u0026lt;ReferencedMemberName\u0026gt;ServicesDependedOn\u0026lt;/ReferencedMemberName\u0026gt; \u0026lt;/AliasProperty\u0026gt; \u0026lt;ScriptMethod\u0026gt; \u0026lt;Name\u0026gt;ToString\u0026lt;/Name\u0026gt; \u0026lt;Script\u0026gt; $this.ServiceName \u0026lt;/Script\u0026gt; \u0026lt;/ScriptMethod\u0026gt; \u0026lt;/Members\u0026gt; \u0026lt;/Type\u0026gt; åœ¨GetPSStandardMemberå‡½æ•°ä¼šè¯•å›¾è·å–System.ServiceProcess.ServiceControllerç±»çš„TargetTypeForDeserializationï¼ˆä¼ å…¥çš„ç¡¬ç¼–ç å‚æ•°ï¼‰å±æ€§ï¼Œä½†å…¶åœ¨æ–‡ä»¶å†…æ²¡æœ‰å®šä¹‰é»˜è®¤çš„TargetTypeForDeserializationå€¼ï¼Œæ‰€ä»¥å¤–å±‚ç±»çš„memberså†…æ²¡æœ‰TargetTypeForDeserializationåå­—çš„å€¼ï¼ŒExchangeå°†è¯•å›¾ä»å­ç±»çš„memberså±æ€§ä¸­æ£€ç´¢TargetTypeForDeserializationåå­—çš„å€¼ï¼Œå‰é¢è¯´è¿‡åœ¨å¯¹å†…å±‚å¯¹è±¡ååºåˆ—åŒ–æ—¶ï¼Œé€šè¿‡ReadPropertieså°†åä¸ºTargetTypeForDeserializationçš„XamlReaderç±»å‹çš„Typeå¯¹è±¡æ·»åŠ åˆ°äº†adaptedMembersä¸­ï¼Œæ­¤æ—¶Exchangeå°†ä¼šæ£€ç´¢åˆ°è¯¥å¯¹è±¡å¹¶è¿”å›ã€‚\nè·å–åˆ°targetTypeForDeserializationä¹‹åï¼ŒReadOneObjectè°ƒç”¨LanguagePrimitives.ConvertToå°†åºåˆ—åŒ–æ•°æ®è½¬æ¢ä¸ºtargetTypeForDeserialization(XamlReader)ã€‚\ninternal object ReadOneObject(out string streamName) { .... object obj = this.ReadOneDeserializedObject(out streamName, out flag); ..... Type targetTypeForDeserialization = psobject.GetTargetTypeForDeserialization(this._typeTable); .... object obj2 = LanguagePrimitives.ConvertTo(obj, targetTypeForDeserialization, true, CultureInfo.InvariantCulture, this._typeTable); ..... } ConvertToå‡½æ•°ä¼šè¿›è¡Œå¦‚ä¸‹è°ƒç”¨é“¾ï¼Œé€šè¿‡åå°„è·å–åˆ°XamlReaderç±»çš„Parseæ–¹æ³•åï¼Œå°†å…¶è°ƒç”¨ï¼ŒæˆåŠŸæ‰§è¡Œä»£ç ã€‚\nè°ƒè¯• ä½¿ç”¨dnsPyé™„åŠ åˆ°ä¸‹é¢çš„è¿›ç¨‹\nc:\\windows\\system32\\inetsrv\\w3wp.exe -ap \u0026#34;MSExchangePowerShellAppPool\u0026#34; -v \u0026#34;v4.0\u0026#34; -c \u0026#34;C:\\Program Files\\Microsoft\\Exchange Server\\V15\\bin\\GenericAppPoolConfigWithGCServerEnabledFalse.config\u0026#34; -a \\\\.\\pipe\\iisipm319caf0c-5de0-4833-8a04-4b28f4a836ae -h \u0026#34;C:\\inetpub\\temp\\apppools\\MSExchangePowerShellAppPool\\MSExchangePowerShellAppPool.config\u0026#34; -w \u0026#34;\u0026#34; -m 0 åœ¨ä»¥ä¸‹å‡ ä¸ªåœ°æ–¹ä¸‹æ–­ç‚¹\nSystem.Runtime.Serialization.Formatters.Binary ObjectReader.Deserialize å‘é€PoCï¼Œè°ƒè¯•å™¨åœ¨æ–­ç‚¹å¤„æ–­ä¸‹ï¼Œæ­¤æ—¶è°ƒç”¨æ ˆå¦‚ä¸‹:\næ­¤æ—¶ä¸ºExchangeè¯•å›¾å°†Propsæ ‡ç­¾å†…çš„åºåˆ—åŒ–æ•°æ®é€šè¿‡ConvertToå‡½æ•°è½¬åŒ–ä¸ºSystem.Exceptionå¯¹è±¡ï¼ŒSystem.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserializeä¼šé€šè¿‡serParser.Run()è§£æè¯»å…¥å†…å­˜ä¸­çš„base64è§£ç æ•°æ®ã€‚\ninternal object Deserialize(HeaderHandler handler, __BinaryParser serParser, bool fCheck, bool isCrossAppDomain, IMethodCallMessage methodCallMessage) { ..... serParser.Run(); if (this.bFullDeserialization) { this.m_objectManager.DoFixups(); } if (!this.bMethodCall \u0026amp;\u0026amp; !this.bMethodReturn) { if (this.TopObject == null) { throw new SerializationException(Environment.GetResourceString(\u0026#34;Serialization_TopObject\u0026#34;)); } if (this.HasSurrogate(this.TopObject.GetType()) \u0026amp;\u0026amp; this.topId != 0L) { this.TopObject = this.m_objectManager.GetObject(this.topId); } if (this.TopObject is IObjectReference) { this.TopObject = ((IObjectReference)this.TopObject).GetRealObject(this.m_context); } } if (this.bFullDeserialization) { this.m_objectManager.RaiseDeserializationEvent(); } if (handler != null) { this.handlerObject = handler(this.headers); } if (this.bMethodCall) { object[] callA = this.TopObject as object[]; this.TopObject = this.binaryMethodCall.ReadArray(callA, this.handlerObject); } else if (this.bMethodReturn) { object[] returnA = this.TopObject as object[]; this.TopObject = this.binaryMethodReturn.ReadArray(returnA, methodCallMessage, this.handlerObject); } return this.TopObject; } serParser.Run()ä¼šå°†å†…å­˜åºåˆ—åŒ–æ•°æ®è¯•å›¾è½¬åŒ–ä¸ºSystem.UnitySerializationHolder å¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼Œé€šè¿‡å¾ªç¯è¯»å–å„ä¸ªæ ‡å¿—ä½è°ƒç”¨ä¸åŒæ–¹æ³•ä»å†…å­˜ä¸­è¯»å–æŒ‡å®šç±»å‹çš„æ•°æ®ã€‚æ„é€ å‡ºSystem.UnitySerializationHolderå¯¹è±¡å¹¶è½½å…¥System.UnitySerializationHolder.AssemblyNameå¯¹åº”çš„DLLã€‚\ninternal void Run() { try { bool flag = true; this.ReadBegin(); this.ReadSerializationHeaderRecord(); while (flag) { BinaryHeaderEnum binaryHeaderEnum = BinaryHeaderEnum.Object; BinaryTypeEnum binaryTypeEnum = this.expectedType; if (binaryTypeEnum != BinaryTypeEnum.Primitive) { if (binaryTypeEnum - BinaryTypeEnum.String \u0026gt; 6) { throw new SerializationException(Environment.GetResourceString(\u0026#34;Serialization_TypeExpected\u0026#34;)); } byte b = this.dataReader.ReadByte(); binaryHeaderEnum = (BinaryHeaderEnum)b; switch (binaryHeaderEnum) { case BinaryHeaderEnum.Object: this.ReadObject(); break; case BinaryHeaderEnum.ObjectWithMap: ..... this.ReadObjectWithMap(binaryHeaderEnum); break; case BinaryHeaderEnum.ObjectWithMapTyped: ...... this.ReadObjectWithMapTyped(binaryHeaderEnum); break; case BinaryHeaderEnum.ObjectString: ...... this.ReadObjectString(binaryHeaderEnum); break; case BinaryHea......flag2) { ObjectProgress objectProgress = (ObjectProgress)this.stack.Peek(); if (objectProgress == null) { this.expectedType = BinaryTypeEnum.ObjectUrt; this.expectedTypeInformation = null; flag2 = true; } else { flag2 = objectProgress.GetNext(out objectProgress.expectedType, out objectProgress.expectedTypeInformation); this.expectedType = objectProgress.expectedType; this.expectedTypeInformation = objectProgress.expectedTypeInformation; if (!flag2) { this.prs.Init(); if (objectProgress.memberValueEnum == InternalMemberValueE.Nested) { this.prs.PRparseTypeEnum = InternalParseTypeE.MemberEnd; this.prs.PRmemberTypeEnum = objectProgress.memberTypeEnum; this.prs.PRmemberValueEnum = objectProgress.memberValueEnum; this.objectReader.Parse(this.prs); } else { this.prs.PRparseTypeEnum = InternalParseTypeE.ObjectEnd; this.prs.PRmemberTypeEnum = objectProgress.memberTypeEnum; this.prs.PRmemberValueEnum = objectProgress.memberValueEnum; this.objectReader.Parse(this.prs); } this.stack.Pop(); this.PutOp(objectProgress); } } } } } } ...... } å°†XamlReaderè¯»å…¥å†…å­˜\nåœ¨System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserializeä¸­å°†é€šè¿‡\nthis.TopObject = ((IObjectReference)this.TopObject).GetRealObject(this.m_context); å°†System.UnitySerializationHolderè½¬åŒ–ä¸ºTypeç±»å‹çš„XamlReaderå¯¹è±¡ï¼Œå¹¶é€šè¿‡åå°„è·å–äº†XamlReaderç±»çš„å„ä¸ªå±æ€§ã€‚\nåœ¨æœ€åå°†this.TopObjectä½œä¸ºè¿”å›å€¼è¿”å›ï¼Œåœ¨ç»è¿‡ä¸€ç³»åˆ—å‡½æ•°è°ƒç”¨è¿”å›åï¼Œå¯ä»¥åœ¨è°ƒè¯•å™¨çœ‹åˆ°ConvertToå‡½æ•°è¿”å›äº†Objectç±»å‹å¯¹è±¡obj2ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸ºç±»å‹ä¸ºTypeç±»å‹çš„XamlReaderå¯¹è±¡ï¼Œä¹‹åReadOneObjectè¿”å›è¯¥å¯¹è±¡ã€‚\næ³¨ï¼šTypeç±»å‹æ˜¯Exchangeå†…å®šä¹‰çš„æŠ½è±¡ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\nnamespace System { // Token: 0x02000148 RID: 328 [ClassInterface(ClassInterfaceType.None)] [ComDefaultInterface(typeof(_Type))] [ComVisible(true)] [__DynamicallyInvokable] [Serializable] public abstract class Type : MemberInfo, _Type, IReflect { // Token: 0x17000217 RID: 535 // (get) Token: 0x060013E6 RID: 5094 RVA: 0x0003BE2A File Offset: 0x0003A02A public override MemberTypes MemberType { get { return MemberTypes.TypeInfo; } } (åº”è¯¥å¯ä»¥ç†è§£obj2ä¸ºå®ç°äº†Typeè¿™ä¸ªæŠ½è±¡ç±»çš„XamlReaderå¯¹è±¡ï¼Œè€ŒXamlReaderç»§æ‰¿äº†Objectè¿™ä¸ªçˆ¶ç±»ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨Objectç±»å‹å¯¹è±¡æ¥å—)\nåœ¨è°ƒç”¨æ ˆå†…ï¼ŒReadOneObjectç”±ReadPropertiesè°ƒç”¨ï¼Œå›åˆ°ReadPropertiesé€»è¾‘ä¸­ï¼ŒExchangeä¼šå°†ReadOneObjectè¿”å›çš„çš„Typeç±»å‹çš„XamlReaderå¯¹è±¡æ·»åŠ åˆ°dso.adaptedMembersä¸­ï¼Œè€Œåè¿™ä¸ªdsoå°†ä¼šè¿”å›åˆ°è°ƒç”¨æ ˆå†…çš„ReadOneObjectå‡½æ•°ã€‚\nç»§ç»­è°ƒè¯•ï¼Œæ­¤æ—¶åµŒå¥—å¯¹è±¡çš„å†…å±‚å¯¹è±¡å·²ååºåˆ—åŒ–ï¼Œå¼€å§‹ååºåˆ—åŒ–å¤–å±‚å¯¹è±¡ï¼Œå›åˆ°ç¨‹åºä¸­ï¼Œä»ä¸‹å›¾å¯ä»¥çœ‹åˆ°ï¼Œå°†ä¼šè°ƒç”¨psobject.GetTargetTypeForDeserializationè·å–ç›®æ ‡ååºåˆ—åŒ–ç±»å‹ï¼Œæ­¤æ—¶psobjectå†…çš„adaptedMemberså†…æœ‰åä¸ºTargetTypeForDeserializationçš„å¯¹è±¡ï¼Œå…¶ç±»å‹ä¸ºTypeçš„XamlReaderå¯¹è±¡\nè¿›å…¥åˆ°psobject.GetTargetTypeForDeserializationå†…ï¼Œè°ƒç”¨this.GetPSStandardMemberè¯•å›¾è·å–PSMemberInfo å¯¹è±¡ï¼Œè€Œåå°†å…¶å¼ºè½¬ä¸ºTypeå¯¹è±¡è¿”å›ï¼Œè‹¥å¤±è´¥åˆ™è¿”å›null\ninternal Type GetTargetTypeForDeserialization(TypeTable backupTypeTable) { PSMemberInfo psstandardMember = this.GetPSStandardMember(backupTypeTable, \u0026#34;TargetTypeForDeserialization\u0026#34;); if (psstandardMember != null) { return psstandardMember.Value as Type; } return null; } åœ¨GetPSStandardMemberå‡½æ•°å†…ï¼Œè°ƒç”¨PSObject.TypeTableGetMemberDelegateå¹¶ä¼ å…¥å½“å‰å¯¹è±¡ã€å…è®¸çš„ç±»å‹åˆ—è¡¨å’Œç¡¬ç¼–ç PSStandardMembersä»¥åˆå§‹åŒ–PSMemberSet å¯¹è±¡ã€‚\ninternal PSMemberInfo GetPSStandardMember(TypeTable backupTypeTable, string memberName) { PSMemberInfo psmemberInfo = null; TypeTable typeTable = (backupTypeTable != null) ? backupTypeTable : this.GetTypeTable(); if (typeTable != null) { PSMemberSet psmemberSet = PSObject.TypeTableGetMemberDelegate\u0026lt;PSMemberSet\u0026gt;(this, typeTable, \u0026#34;PSStandardMembers\u0026#34;); if (psmemberSet != null) { psmemberSet.ReplicateInstance(this); psmemberInfo = new PSMemberInfoIntegratingCollection\u0026lt;PSMemberInfo\u0026gt;(psmemberSet, PSObject.GetMemberCollection(PSMemberViewTypes.All, backupTypeTable))[memberName]; } } if (psmemberInfo == null) { psmemberInfo = (this.InstanceMembers[\u0026#34;PSStandardMembers\u0026#34;] as PSMemberSet); } return psmemberInfo; } è€Œåè°ƒç”¨PSMemberInfoIntegratingCollectionæ„é€ å‡½æ•°ï¼Œå…¶ä¸­PSMemberInfoIntegratingCollectionç±»ç»§æ‰¿äº†PSMemberInfoç±»ã€‚ä¼ å…¥æ„é€ å‡½æ•°çš„collectionså˜é‡æ¥æºäºPSObject.GetMemberCollection(PSMemberViewTypes.All, backupTypeTable) å‡½æ•°çš„è¿”å›å€¼ï¼Œæ„é€ å‡½æ•°å°†collectionsèµ‹ç»™å½“å‰å¯¹è±¡çš„collectionså±æ€§ã€‚\ninternal class PSMemberInfoIntegratingCollection\u0026lt;T\u0026gt; : PSMemberInfoCollection\u0026lt;T\u0026gt;, IEnumerable\u0026lt;T\u0026gt;, IEnumerable where T : PSMemberInfo { // Token: 0x06002AC3 RID: 10947 RVA: 0x000C35F4 File Offset: 0x000C17F4 private void GenerateAllReservedMembers() { if (!this.mshOwner.hasGeneratedReservedMembers) { this.mshOwner.hasGeneratedReservedMembers = true; ReservedNameMembers.GeneratePSExtendedMemberSet(this.mshOwner); ReservedNameMembers.GeneratePSBaseMemberSet(this.mshOwner); ReservedNameMembers.GeneratePSObjectMemberSet(this.mshOwner); ReservedNameMembers.GeneratePSAdaptedMemberSet(this.mshOwner); ReservedNameMembers.GeneratePSTypeNames(this.mshOwner); } } internal PSMemberInfoIntegratingCollection(object owner, Collection\u0026lt;CollectionEntry\u0026lt;T\u0026gt;\u0026gt; collections) { if (owner == null) { throw PSTraceSource.NewArgumentNullException(\u0026#34;owner\u0026#34;); } this.mshOwner = (owner as PSObject); this.memberSetOwner = (owner as PSMemberSet); if (this.mshOwner == null \u0026amp;\u0026amp; this.memberSetOwner == null) { throw PSTraceSource.NewArgumentException(\u0026#34;owner\u0026#34;); } if (collections == null) { throw PSTraceSource.NewArgumentNullException(\u0026#34;collections\u0026#34;); } this.collections = collections; } GetMemberCollectionä»£ç å¦‚ä¸‹ï¼Œå…¶ä¼šå°†å¯¹è±¡çš„adaptedMemberså±æ€§æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œè€Œåœ¨å†…å±‚å¯¹è±¡ååºåˆ—åŒ–æ—¶å·²ç»å°†åä¸ºTargetTypeForDeserializationçš„XamlReaderç±»å‹çš„Typeå¯¹è±¡åŠ å…¥åˆ°adaptedMemberså±æ€§ä¸­ã€‚æ‰€ä»¥è¿”å›çš„åˆ—è¡¨å†…ä¹Ÿä¼šåŒ…å«è¯¥å¯¹è±¡ã€‚\ninternal static Collection\u0026lt;CollectionEntry\u0026lt;PSMemberInfo\u0026gt;\u0026gt; GetMemberCollection(PSMemberViewTypes viewType, TypeTable backupTypeTable) { Collection\u0026lt;CollectionEntry\u0026lt;PSMemberInfo\u0026gt;\u0026gt; collection = new Collection\u0026lt;CollectionEntry\u0026lt;PSMemberInfo\u0026gt;\u0026gt;(); if ((viewType \u0026amp; PSMemberViewTypes.Extended) == PSMemberViewTypes.Extended) { if (backupTypeTable == null) { collection.Add(new CollectionEntry\u0026lt;PSMemberInfo\u0026gt;(new CollectionEntry\u0026lt;PSMemberInfo\u0026gt;.GetMembersDelegate(PSObject.TypeTableGetMembersDelegate\u0026lt;PSMemberInfo\u0026gt;), new CollectionEntry\u0026lt;PSMemberInfo\u0026gt;.GetMemberDelegate(PSObject.TypeTableGetMemberDelegate\u0026lt;PSMemberInfo\u0026gt;), true, true, \u0026#34;type table members\u0026#34;)); } else { collection.Add(new CollectionEntry\u0026lt;PSMemberInfo\u0026gt;((PSObject msjObj) =\u0026gt; PSObject.TypeTableGetMembersDelegate\u0026lt;PSMemberInfo\u0026gt;(msjObj, backupTypeTable), (PSObject msjObj, string name) =\u0026gt; PSObject.TypeTableGetMemberDelegate\u0026lt;PSMemberInfo\u0026gt;(msjObj, backupTypeTable, name), true, true, \u0026#34;type table members\u0026#34;)); } } if ((viewType \u0026amp; PSMemberViewTypes.Adapted) == PSMemberViewTypes.Adapted) { **collection.Add(new CollectionEntry\u0026lt;PSMemberInfo\u0026gt;(new CollectionEntry\u0026lt;PSMemberInfo\u0026gt;.GetMembersDelegate(PSObject.AdapterGetMembersDelegate\u0026lt;PSMemberInfo\u0026gt;), new CollectionEntry\u0026lt;PSMemberInfo\u0026gt;.GetMemberDelegate(PSObject.AdapterGetMemberDelegate\u0026lt;PSMemberInfo\u0026gt;), false, false, \u0026#34;adapted members\u0026#34;));** } if ((viewType \u0026amp; PSMemberViewTypes.Base) == PSMemberViewTypes.Base) { collection.Add(new CollectionEntry\u0026lt;PSMemberInfo\u0026gt;(new CollectionEntry\u0026lt;PSMemberInfo\u0026gt;.GetMembersDelegate(PSObject.DotNetGetMembersDelegate\u0026lt;PSMemberInfo\u0026gt;), new CollectionEntry\u0026lt;PSMemberInfo\u0026gt;.GetMemberDelegate(PSObject.DotNetGetMemberDelegate\u0026lt;PSMemberInfo\u0026gt;), false, false, \u0026#34;clr members\u0026#34;)); } return collection; } private static T AdapterGetMemberDelegate\u0026lt;T\u0026gt;(PSObject msjObj, string name) where T : PSMemberInfo { if (!msjObj.isDeserialized) { T t = msjObj.InternalAdapter.BaseGetMember\u0026lt;T\u0026gt;(msjObj.immediateBaseObject, name); PSObject.memberResolution.WriteLine(\u0026#34;Adapted member: {0}.\u0026#34;, (t == null) ? \u0026#34;not found\u0026#34; : t.Name); return t; } if (msjObj.adaptedMembers == null) { return default(T); } T t2 = msjObj.adaptedMembers[name] as T; PSObject.memberResolution.WriteLine(\u0026#34;Serialized adapted member: {0}.\u0026#34;, (t2 == null) ? \u0026#34;not found\u0026#34; : t2.Name); return t2; } è¿”å›åˆ°GetPSStandardMemberå‡½æ•°ä¸­ï¼ŒExchangeä¼šåŒ¹é…æ„é€ å‡½æ•°è¿”å›çš„å¯¹è±¡çš„memberNameå±æ€§ï¼Œè¯¥å±æ€§æ¥æºäºGetTargetTypeForDeserializationè°ƒç”¨æ—¶ä¼ é€’çš„ç¡¬ç¼–ç TargetTypeForDeserializationï¼Œå³å°†ä»è¯¥å¯¹è±¡ä¸­æ£€ç´¢åä¸ºTargetTypeForDeserializationçš„å€¼ï¼Œå‰é¢æåˆ°è¿‡åˆ—è¡¨å†…å·²æœ‰è¯¥åå­—çš„å¯¹è±¡ï¼Œæ‰€ä»¥å°†åŒ¹é…åˆ°XamlReaderç±»å‹çš„Typeå¯¹è±¡ï¼Œå¹¶è¿”å›ç»™ä¸Šå±‚å‡½æ•°ã€‚\nè¿”å›åˆ°ä¸Šå±‚å‡½æ•°ï¼ŒGetTargetTypeForDeserializationè¿”å›äº†XamlReaderç±»å‹ã€‚\nè¿›å…¥åˆ°ConvertToå‡½æ•°å†…ï¼ŒvalueToConvertä¸ºä¸Šå±‚å‡½æ•°ReadOneObjectå‡½æ•°ä¼ å…¥çš„objå¯¹è±¡ï¼Œå…¶å†…åŒ…å«äº†xamlååºåˆ—åŒ–çš„å‘½ä»¤æ‰§è¡Œå­—ç¬¦ä¸²ã€‚\nè¿›å…¥åˆ°LanguagePrimitives.FigureConversionåœ¨#3527å¤„æ–­ç‚¹ï¼Œæ­¤æ—¶fromTypeä¸ºStringï¼ŒtoTypeä¸ºXamlReader\nè¿›å…¥FigureParseConversionå†…ï¼Œå°†ä¼šé€šè¿‡åå°„è·å–åˆ°XamlReaderçš„Parseæ–¹æ³•ã€‚\nprivate static LanguagePrimitives.PSConverter\u0026lt;object\u0026gt; FigureParseConversion(Type fromType, Type toType) { ..... else if (fromType == typeof(string)) { MethodInfo methodInfo = null; try { methodInfo = toType.GetMethod(\u0026#34;Parse\u0026#34;, BindingFlags.Static | BindingFlags.Public | BindingFlags.FlattenHierarchy, null, new Type[] { typeof(string), typeof(IFormatProvider) }, null); } catch (AmbiguousMatchException ex) { LanguagePrimitives.typeConversion.WriteLine(\u0026#34;Exception finding Parse method with CultureInfo: \\\u0026#34;{0}\\\u0026#34;.\u0026#34;, ex.Message); } catch (ArgumentException ex2) { LanguagePrimitives.typeConversion.WriteLine(\u0026#34;Exception finding Parse method with CultureInfo: \\\u0026#34;{0}\\\u0026#34;.\u0026#34;, ex2.Message); } if (methodInfo != null) { return new LanguagePrimitives.PSConverter\u0026lt;object\u0026gt;(new LanguagePrimitives.ConvertViaParseMethod { parse = methodInfo }.ConvertWithCulture); } try { methodInfo = toType.GetMethod(\u0026#34;Parse\u0026#34;, BindingFlags.Static | BindingFlags.Public | BindingFlags.FlattenHierarchy, null, new Type[] { typeof(string) }, null); } catch (AmbiguousMatchException ex3) { LanguagePrimitives.typeConversion.WriteLine(\u0026#34;Exception finding Parse method: \\\u0026#34;{0}\\\u0026#34;.\u0026#34;, ex3.Message); } catch (ArgumentException ex4) { LanguagePrimitives.typeConversion.WriteLine(\u0026#34;Exception finding Parse method: \\\u0026#34;{0}\\\u0026#34;.\u0026#34;, ex4.Message); } if (methodInfo != null) { return new LanguagePrimitives.PSConverter\u0026lt;object\u0026gt;(new LanguagePrimitives.ConvertViaParseMethod { parse = methodInfo }.ConvertWithoutCulture); } } return null; } XamlReader.Parseæ–¹æ³•å°†ä¼šç”±LanguagePrimitives.ConvertViaParseMethod.ConvertWithoutCultureæ–¹æ³•è°ƒç”¨ã€‚ä¹‹åå°±æ˜¯æ™®é€šçš„ååºåˆ—åŒ–è¿‡ç¨‹äº†ã€‚\nå°ç»“ è¿™ä¸ªæ¼æ´åˆ©ç”¨é“¾æ ¸å¿ƒæ˜¯å¦‚ä½•ç»•è¿‡Exchangeé»‘åå•ç±»å¹¶ä½¿Exchangeå°†æ”»å‡»è€…æ§åˆ¶çš„æŒ‡å®šæ•°æ®ååºåˆ—åŒ–åˆ°æŒ‡å®šå±é™©ç±»é€ æˆä»£ç æ‰§è¡Œã€‚\næ¼æ´åˆ©ç”¨äº†Exchangeçš„åˆæ³•åŠŸèƒ½ï¼Œå…ˆæ„é€ äº†åä¸ºtargetTypeForDeserialization çš„XamlReaderç±»å‹çš„Typeå¯¹è±¡åºåˆ—åŒ–å€¼ï¼Œåˆ©ç”¨Microsoft.Exchange.Data.SerializationTypeConverterçš„ç‰¹æ€§è¿”å›äº†XamlReaderç±»å‹çš„Typeå¯¹è±¡ï¼Œè€ŒåReadPropertieså°†å…¶åŠ å…¥åˆ°adaptedMemberå†…ã€‚åœ¨å¤–å±‚å¯¹è±¡ååºåˆ—åŒ–æ—¶ï¼Œæ„é€ çš„PSMembersåŒ…å«äº†åä¸ºtargetTypeForDeserializationçš„XamlReaderç±»å‹çš„Typeå¯¹è±¡ï¼ŒExchangeä¼šåœ¨PSMembersåˆ—è¡¨å†…åŒ¹é…targetTypeForDeserializationé¡¹ï¼Œä»è€Œæ§åˆ¶äº†ConvertToå‡½æ•°è½¬åŒ–çš„ç›®æ ‡ç±»XamlReaderï¼ŒExchangeé€šè¿‡åå°„è·å–åˆ°äº†XamlReaderçš„Parseæ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ååºåˆ—åŒ–æ”»å‡»è€…å¯æ§çš„åºåˆ—åŒ–æ•°æ®ï¼Œè§¦å‘ä»£ç æ‰§è¡Œã€‚\nåœ¨è°ƒè¯•è¿‡ç¨‹ä¸­éœ€è¦å°†.NET Frameworkçš„ä¼˜åŒ–å…³æ‰ä»¥ä¾¿dnSpyè°ƒè¯•\n[.NET Framework Debugging Control] GenerateTrackingInfo=1 AllowOptimize=0 COMPlus_ZapDisable=1 COMPlus_ReadyToRun=0 å…¶ä»–\nPSRPï¼šPowerShell Remote Protocol powerShellè¿œç¨‹åè®®ï¼Œæ˜¯å¾®è½¯æä¾›çš„é€šè¿‡SOAPåè®®ä¸Šæ‰§è¡ŒPowerShellä»£ç çš„åè®®\nå‚è€ƒèµ„æ–™\nhttps://www.zerodayinitiative.com/blog/2022/11/14/control-your-types-or-get-pwned-remote-code-execution-in-exchange-powershell-backend\nhttps://www.zerodayinitiative.com/blog/2021/8/17/from-pwn2own-2021-a-new-attack-surface-on-microsoft-exchange-proxyshell\nCreated at 2023-05-05T20:35:49+08:00\n"},{"uri":"https://www.ch35tnut.site/zh-cn/research/code-audit/wireshark-185/","title":"Wireshark 1.8.5ä»£ç å®¡è®¡","tags":[],"description":"","content":"é€šè¿‡çˆ¬å–wiresharkçš„æ¼æ´å…¬å‘Šé¡µé¢ï¼Œç­›é€‰1.8.6ä¿®å¤çš„æ¼æ´å¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š\n1.8.6/1.8.7ä¿®å¤çš„æ¼æ´\nwnpa-sec-2013-31. ETCH dissector large loop. Fixed in 1.8.7.\nThe ETCH dissector could go into a large loop. Discovered by Moshe Kaplan.It may be possible to make Wireshark consume excessive CPU resources by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-30. MySQL dissector infinite loop. Fixed in 1.8.7.\nThe MySQL dissector could go into an infinite loop. Discovered by Moshe Kaplan.It may be possible to make Wireshark consume excessive CPU resources by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-29. Websocket dissector crash. Fixed in 1.8.7.\nThe Websocket dissector could crash. Discovered by Moshe Kaplan.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-28. MPEG DSM-CC dissector crash. Fixed in 1.8.7.\nThe MPEG DSM-CC dissector could crash.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-27. DCP ETSI dissector crash. Fixed in 1.8.7.\nThe DCP ETSI dissector could crash. Discovered by Evan Jensen.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-26. PPP CCP dissector crash. Fixed in 1.8.7.\nThe PPP CCP dissector could crash.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-25. ASN.1 BER dissector crash. Fixed in 1.8.7, 1.6.15.\nThe ASN.1 BER dissector could crash.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-24. GTPv2 dissector crash. Fixed in 1.8.7.\nThe GTPv2 dissector could crash.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-23. RELOAD dissector infinite loop. Fixed in 1.8.7.\nThe RELOAD dissector could go into an infinite loop. Discovered by Evan Jensen.It may be possible to make Wireshark consume excessive CPU resources by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-22. DTLS dissector crash. Fixed in 1.8.6, 1.6.14.\nThe DTLS dissector could crash. Discovered by Laurent Butti.It may be possible to make Wireshark consume excessive CPU resources by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-21. RELOAD dissector infinite loop. Fixed in 1.8.6.\nThe RELOAD dissector could go into an infinite loop. Discovered by Even Jensen.It may be possible to make Wireshark consume excessive CPU resources by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-20. FCSP dissector infinite loop. Fixed in 1.8.6, 1.6.14.\nThe FCSP dissector could go into an infinite loop. Discovered by Moshe Kaplan.It may be possible to make Wireshark consume excessive CPU resources by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-19. CIMD dissector crash. Fixed in 1.8.6, 1.6.14.\nThe CIMD dissector could crash. Discovered by Moshe Kaplan.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-18. ACN dissector divide by zero. Fixed in 1.8.6, 1.6.14.\nThe ACN dissector could attempt to divide by zero. Discovered by Alyssa Milburn.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-17. AMPQ dissector infinite loop. Fixed in 1.8.6, 1.6.14.\nThe AMPQ dissector could go into an infinite loop. Discovered by Moshe Kaplan.It may be possible to make Wireshark consume excessive CPU resources by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-16. Mount dissector crash. Fixed in 1.8.6, 1.6.14.\nThe Mount dissector could crash. Discovered by Alyssa Milburn.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-15. RTPS and RTPS2 dissector crash. Fixed in 1.8.6, 1.6.14.\nThe RTPS and RTPS2 dissectors could crash. Discovered by Alyssa Milburn.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-14. MPLS Echo dissector infinite loop. Fixed in 1.8.6.\nThe MPLS Echo dissector could go into an infinite loop. Discovered by Laurent Butti.It may be possible to make Wireshark consume excessive CPU resources by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-13. MS-MMS dissector crash. Fixed in 1.8.6, 1.6.14.\nThe MS-MMS dissector could crash. Discovered by Laurent Butti.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-12. CSN.1 dissector crash. Fixed in 1.8.6.\nThe CSN.1 dissector could crash. Discovered by Laurent Butti.It may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-11. HART/IP dissector infinite loop. Fixed in 1.8.6.\nThe HART/IP dissectory could go into an infinite loop.It may be possible to make Wireshark consume excessive CPU resources by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nwnpa-sec-2013-10. TCP dissector crash. Fixed in 1.8.6.\nThe TCP dissector could crashIt may be possible to make Wireshark crash by injecting a malformed packet onto the wire or by convincing someone to read a malformed packet trace file.\nCreated att 2022-09-08T18:13:59+08:00\n"},{"uri":"https://www.ch35tnut.site/zh-cn/research/code-audit/news-server/","title":"News Serverå®¡è®¡","tags":[],"description":"","content":"ä»£ç åœ°å€\nhttps://trailofbits.github.io/ctf/vulnerabilities/source_workshop/news_install.sh\nhttps://trailofbits.github.io/ctf/vulnerabilities/source_workshop/news_server.c\nhttps://trailofbits.github.io/ctf/vulnerabilities/source.html\nç¼–è¯‘ï¼šgcc -m32 -g -o news_server news_server.c\nç›®æ ‡ï¼šæ‰¾å‡º10ä¸ªbugå’Œæ¼æ´\nnews_serveré»˜è®¤å·¥ä½œåœ¨æ ¹ç›®å½•ï¼Œæ²¡æœ‰é€šè¿‡chdiråˆ‡æ¢å·¥ä½œç›®å½•ï¼ˆä¸çŸ¥é“ç®—ä¸ç®—bugï¼‰\nä¿®å¤ï¼š\nvoid handleConnection(FILE *logfile, int sock) { chdir(\u0026#34;/root/code/c/news_server/\u0026#34;); åœ¨authenticateå‡½æ•°å­˜åœ¨adminåé—¨\nif (memcmp(pass, \u0026#34;baCkDoOr\u0026#34;, 9) == 0) { return 1; } authenticate ä¸­ç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥åˆ°å‘½ä»¤ï¼Œå‘½ä»¤æ³¨å…¥\nint authenticate(FILE *logfile, char *user, char *pass) { char search[512]; char path[1024]; char userfile[1024]; char data[1024]; FILE *file; int ret; memset(path, 0, sizeof(1024)); /* FIXME: hard coded admin backdoor for password recovery */\tif (memcmp(pass, \u0026#34;baCkDoOr\u0026#34;, 9) == 0) { return 1; } /* look up user by checking user files: done via system() to /bin/ls|grep user */ logData(logfile, \u0026#34;performing lookup for user via system()!\\n\u0026#34;); snprintf(userfile, sizeof(userfile)-1, \u0026#34;%s.txt\u0026#34;, user); snprintf(search, sizeof(userfile)-1, \u0026#34;stat %s`ls %s | grep %s`\u0026#34;, USERPATH, USERPATH, userfile); ret = system(search); æ ˆæº¢å‡ºã€ä»»æ„æ–‡ä»¶è¯»ï¼ˆç›®å½•ç©¿è¶Šï¼‰\nvoid readArticle(int sock, FILE *logfile, char *action) { FILE *file; char buf[100]; char path[100]; logData(logfile, \u0026amp;action[1]); strcpy(path, ARTICLEPATH); strcat(path, \u0026amp;action[1]); logData(logfile, \u0026#34;user request to read article: %s\u0026#34;, path); file = fopen(path, \u0026#34;r\u0026#34;); if (!file) { writeSock(sock, FILENOTAVAIL, sizeof(FILENOTAVAIL)); return; } /* fgets for the size of the buffer (100), from the file writing the article to the user each time! */ while (fgets(buf, 1000, file)) æ–‡ä»¶å†™ï¼ˆç›®å½•ç©¿è¶Šï¼‰ã€æ ˆæº¢å‡º11å­—èŠ‚\nvoid writeArticle(int sock, FILE *logfile, char *action) { FILE *file;\tchar *p; size_t x, y; int complete = 0; char buf[1024]; char path[1024]; strcpy(path, ARTICLEPATH); strncat(path, \u0026amp;action[1], sizeof(path)); logData(logfile, \u0026#34;user writing article: %s\u0026#34;, path); file = fopen(\u0026amp;action[1], \u0026#34;w\u0026#34;); if (!file) { writeSock(sock, FILENOTAVAIL, sizeof(FILENOTAVAIL)); return; } writeSock(sock, BEGINFILE, sizeof(BEGINFILE)); "},{"uri":"https://www.ch35tnut.site/zh-cn/others/add-timeline-shortcode/","title":"ç»™hugo-theme-learnå¢åŠ timelineåŠŸèƒ½","tags":[],"description":"","content":"å‰è¨€ ç°åœ¨ä½¿ç”¨hugo-theme-learnä¸»é¢˜ï¼Œä½†è¿™ä¸ªä¸»é¢˜æ²¡æœ‰æä¾›æ—¶é—´çº¿åŠŸèƒ½ï¼Œä¸ºäº†ç»™é¦–é¡µå¢åŠ æ—¶é—´çº¿åŠŸèƒ½ï¼ŒèŠ±äº†ä¸¤å¤©ç ”ç©¶äº†ä¸€ä¸‹æ€ä¹ˆæ·»åŠ æ—¶é—´çº¿åŠŸèƒ½ã€‚\nä¸ºäº†æ–¹ä¾¿å¢åŠ æ—¶é—´çº¿çš„äº‹ä»¶ï¼Œé‡‡ç”¨è‡ªå®šä¹‰shortcodeçš„æ–¹å¼å¢åŠ æ—¶é—´çº¿ï¼Œä»£ç å¤§éƒ¨åˆ†å‚è€ƒå¼•ç”¨é“¾æ¥é‡Œé¢çš„ï¼Œé­”æ”¹äº†ä¸€ä¸‹ä»¥é€‚åº”è‡ªå·±çš„ä¸»é¢˜ï¼Œå¢åŠ äº†è¿‡å»å¤šå°‘å¤©çš„æ˜¾ç¤ºã€‚\nä»£ç å®ç° åœ¨layout/shortcodesæ–°å¢æ–‡ä»¶ï¼ševent.htmlå’Œtimeline.htmlï¼Œå†…å®¹åˆ†åˆ«å¦‚ä¸‹\nevent.html {{$duration := \u0026#34;\u0026#34;}} {{$to := now }} {{ if ne (.Get \u0026#34;to\u0026#34;) \u0026#34;\u0026#34;}} {{$to = time (.Get \u0026#34;to\u0026#34;) }} {{end}} {{$enabledTime := ne (.Get \u0026#34;from\u0026#34;) \u0026#34;\u0026#34;}} {{if $enabledTime }} {{$from := time (.Get \u0026#34;from\u0026#34;) }} {{ $diff := $to.Sub $from }} {{ $days := div $diff.Hours 24 | math.Round }} {{$tmonths:=mul ($to.Sub $from).Hours 0.00136986301 }} {{$months := mod $tmonths 12 }} {{$years := math.Floor (div $tmonths 12)}} {{$yearStr := \u0026#34;years\u0026#34;}} {{if lt $years 2 }} {{$yearStr = \u0026#34;year\u0026#34;}} {{end}} {{$monthStr := \u0026#34;months\u0026#34;}} {{if lt $months 2 }} {{$monthStr = \u0026#34;month\u0026#34;}} {{end}} {{$daysStr := \u0026#34;days\u0026#34;}} {{ $idays :=int $days }} {{$duration = \u0026#34;\u0026#34;}} {{if gt $years 0 }} {{$duration = printf \u0026#34;%s %.0f %s\u0026#34; $duration $years $yearStr}} {{$idays = sub $idays (mul 365 $years)}} {{end}} {{if gt $months 0 }} {{$duration = printf \u0026#34;%s %d %s\u0026#34; $duration $months $monthStr}} {{$idays = sub $idays (mul 30 $months)}} {{end}} {{$idays = int $idays}} {{if gt $idays 0}} {{if lt $idays 2}} {{$daysStr = \u0026#34;day\u0026#34;}} {{end}} {{$duration = printf \u0026#34;%s %d %s\u0026#34; $duration $idays $daysStr}} {{end}} {{end}} {{ $from := .Get \u0026#34;from\u0026#34; | time }} {{ $to := now }} {{ $diff := $to.Sub $from }} {{ $ago := div $diff.Hours 24 | math.Round }} {{ $measure := cond (eq 1 $ago) \u0026#34;day\u0026#34; \u0026#34;days\u0026#34; }} {{ $seed := \u0026#34;foo\u0026#34; }} {{ $random := delimit (shuffle (split (md5 $seed) \u0026#34;\u0026#34; )) \u0026#34;\u0026#34; }} \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;content\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;title\u0026#34;\u0026gt;{{.Get \u0026#34;title\u0026#34;}}\u0026lt;/div\u0026gt; {{if $enabledTime }} \u0026lt;div class=\u0026#34;moment\u0026#34; {{ if eq .Ordinal 0 }} id=\u0026#34;moment\u0026#34; {{ end }} {{ if ne .Ordinal 0 }}id=\u0026#34;moment-{{ substr $random 0 16}}\u0026#34;{{end}}\u0026gt; {{ if ne .Ordinal 0 }} {{$duration}} {{ end }} | {{ $ago }} {{ $measure}} ago \u0026lt;/div\u0026gt; {{ end }} \u0026lt;div class=\u0026#34;body\u0026#34;\u0026gt; {{.Inner}} \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;date\u0026#34;\u0026gt;{{$to.Year}}\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; {{ if and (eq (.Ordinal) 0) $enabledTime }} \u0026lt;script\u0026gt; function non0plural(number, name) { if (number == 0) { return \u0026#34;\u0026#34; } if (number \u0026gt; 1) { return number + \u0026#34; \u0026#34; + name + \u0026#34;s\u0026#34; } return number + \u0026#34; \u0026#34; + name } function refresh() { start = dayjs({{.Get \u0026#34;from\u0026#34;}}) now = dayjs() total_days = now.diff(start,\u0026#34;d\u0026#34;,true) total_months = now.diff(start, \u0026#34;M\u0026#34;, true) months = total_months % 12 years = Math.floor((total_months) / 12) // for (var i = 0, els = document.querySelectorAll(`[id^=\u0026#34;moment\u0026#34;]`); i \u0026lt; els.length; i++) { // els[i].innerHTML = non0plural(years, \u0026#34;year\u0026#34;) + \u0026#34; \u0026#34; + non0plural(months.toFixed(8), \u0026#34;month\u0026#34;) // } // å¦‚æœæœˆä»½å¤§äº1åˆ™ if(years\u0026gt;=1){ total_days-=365*years } if(months\u0026gt;=1){ total_days-=30*months } el = document.querySelector(\u0026#34;#moment\u0026#34;); el.innerHTML = years\u0026gt;1? non0plural(years, \u0026#34;year\u0026#34;):\u0026#34;\u0026#34; + \u0026#34; \u0026#34; + months\u0026gt;1? non0plural(months.toFixed(4), \u0026#34;month\u0026#34;):\u0026#34;\u0026#34; + total_days\u0026gt;=1?non0plural(total_days.toFixed(2),\u0026#34;day\u0026#34;):\u0026#34;\u0026#34; el.innerHTML = el.innerHTML + \u0026#34; ago\u0026#34; } window.setInterval(refresh, 100); \u0026lt;/script\u0026gt; {{ end }} timeline.html \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; .timeline { position: relative; margin: 0 auto; } /* The actual timeline (the vertical ruler) */ .timeline::after { content: \u0026#34;\u0026#34;; position: absolute; width: 6px; background-color: #444; top: 0; bottom: 0; left: 10%; margin-left: -3px; } /* Container around content */ .timeline .container { padding: 10px 10px 10px 40px; margin-top: 10px; position: relative; /* background-color: gray; */ width: 90%; left: 10%; } /* The circles on the timeline */ .timeline .container::after { content: \u0026#34;\u0026#34;; position: absolute; width: 25px; height: 25px; left: -12px; background-color: rgb(106, 215, 229); border: 4px solid #444; top: 0px; border-radius: 50%; z-index: 1; } /* date display */ .timeline .container .date { position: absolute; top: 0px; z-index: 1; left: -15%; font-size: large; } /* Add arrows to the right container (pointing left) */ .timeline .container::before { content: \u0026#34; \u0026#34;; height: 0; position: absolute; top: 30px; width: 0; z-index: 1; left: 26px; border: medium solid #6ad7e5; border-width: 13px 13px 13px 0px; border-color: #6ad7e5 #6ad7e5 transparent transparent; } /* The actual content */ .timeline .content { box-shadow: 0 0 3px 3px #6ad7e5; background-color: white; position: relative; border-radius: 6px; transition: box-shadow 0.3s; } /* small shadow change on hover*/ .timeline .content:hover { box-shadow: 0 0 3px 4px #6ad7e5; } /* card title format */ .timeline .content .title { padding: 5px 30px; font-weight: bold; display: inline-block; } /* time moment format*/ .timeline .content .moment { color: #c41a16; text-align: right; position: absolute; top: 0; right: 0; padding: 5px; } /* body size */ .timeline .content .body { padding: 5px 30px; word-wrap: break-word; /* height: 73px; */ /* max-height: 120px; */ text-overflow: ellipsis; overflow: hidden; } /* responsive for small devices*/ @media screen and (max-width: 600px) { .timeline .container { padding: 10px 10px 0px 40px; left: 5%; width: 95%; } .timeline .container .date { font-size: small; transform: rotate(-90deg); left: -5%; top: 30px; } .timeline .container::after { left: 3px; } .timeline .content .body { padding: 5px 5px; } .timeline .content .moment { position: relative; } } \u0026lt;/style\u0026gt; \u0026lt;div class=\u0026#34;timeline\u0026#34;\u0026gt; {{ .Inner }} \u0026lt;/div\u0026gt; ç”±äºevent.htmlé‡Œé¢å¼•ç”¨äº†dayjsï¼Œè¿™ä¸ªjsä¸åœ¨å½“å‰ä¸»é¢˜å†…ï¼Œå¯ä»¥åœ¨config.tomlæ–°å¢custom_js = [\u0026quot;js/dayjs.min.js\u0026quot;]ï¼Œç„¶åæŠŠdayjs.min.jsæ”¾åœ¨theme\\hugo-theme-learn\\static\\jsç›®å½•å†…ï¼Œå³å¯è§£å†³å¯¼å…¥dayjsçš„é—®é¢˜ã€‚\næ­¤æ—¶å¯ä»¥åœ¨éœ€è¦æ·»åŠ æ—¶é—´çº¿çš„åœ°æ–¹ä½¿ç”¨timelineçš„shortcodeæ·»åŠ ï¼Œä»¥ä¸‹æ˜¯æˆ‘åšå®¢é¦–é¡µçš„æ—¶é—´çº¿ä»£ç ï¼š\n{{\u0026lt; timeline \u0026gt;}} {{% event title=\u0026#34;09-03è‡³09-04\u0026#34; from=\u0026#34;2022-09-03\u0026#34; to=\u0026#34;2022-09-04\u0026#34; %}} è¿™ä¸¤å¤©ï¼Œç»™hugoä¸»é¢˜å¢åŠ äº†timelineçš„shortcodeï¼Œè§[å¢åŠ timelineåŠŸèƒ½](others/add-timeline-shortcode) {{% /event %}} {{% event title=\u0026#34;08-29è‡³09-02\u0026#34; from=\u0026#34;2022-08-29\u0026#34; to=\u0026#34;2022-09-02\u0026#34; %}} å‘¨å†…å®¡è®¡äº†ä»£ç  {{% /event %}} {{\u0026lt; /timeline \u0026gt;}} é™¤äº†è¿™ä¸ªè¿˜é¡ºä¾¿ç»™åšå®¢æ–°å¢äº†åŸºäºGithub issueçš„è¯„è®ºåŠŸèƒ½ï¼Œå‚è€ƒ\rutterancã€‚\nå‚è€ƒ\nhttps://metalblueberry.github.io/post/howto/2021-02-28_hugo_timeline_shortcode/\n"},{"uri":"https://www.ch35tnut.site/zh-cn/about/","title":"å…³äºæˆ‘","tags":[],"description":"","content":"å…³äºæˆ‘ 21å¹´æ¯•ä¸šï¼Œç›®å‰åœ¨æŸå®‰å…¨å‚å•†å·¥ä½œï¼Œä¸»è¦ç ”ç©¶äºŒè¿›åˆ¶ã€‚\n"},{"uri":"https://www.ch35tnut.site/zh-cn/research/protocol/kerberos/authentication-principle.zh.cn/","title":"è®¤è¯åŸç†","tags":[],"description":"","content":"è®¤è¯åŸç† ä¸€ã€Kerberosæ¦‚å¿µ Kerberosæ˜¯è®¡ç®—æœºç½‘ç»œæˆæƒåè®®ï¼Œç”¨äºåœ¨éå®‰å…¨ç½‘ç»œä¸­ï¼Œå¯¹ä¸ªäººé€šä¿¡è¿‡ç¨‹ä¸­ç”¨å®‰å…¨çš„æ‰‹æ®µè¿›è¡Œèº«ä»½è®¤è¯ã€‚å…¶ä¸­å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯èƒ½å¤Ÿç›¸äº’è®¤è¯ï¼Œè¯†åˆ«å¯¹æ–¹èº«ä»½ã€‚Kerberosæ˜¯ç¬¬ä¸‰æ–¹è®¤è¯ï¼Œä¾èµ–äºç¬¬ä¸‰æ–¹æœåŠ¡å™¨å¯¹å½¼æ­¤è¿›è¡Œèº«ä»½éªŒè¯ï¼ŒKerberosæœåŠ¡å™¨æœ¬èº«æˆä¸ºKDCã€‚ ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š\nKerberosçŸ¥é“ç”¨æˆ·å’Œé›†ç¾¤å†…æœåŠ¡ä»¥åŠå„è‡ªçš„å¯†ç æ•°æ®åº“ ASéªŒè¯ç”¨æˆ·èº«ä»½ï¼ŒéªŒè¯é€šè¿‡å°±ä¼šè¿”å›ç»™Clientç«¯ä¸€ä¸ªTGT Clienté€šè¿‡TGTå‘TGSè·å–ST æœåŠ¡éªŒè¯STæœ‰æ•ˆæ€§ï¼Œå¦‚æœæœ‰æ•ˆåˆ™Clientå¯ä»¥è®¿é—®æœåŠ¡ äºŒã€Kerberosåè¯è§£é‡Š ASï¼ˆAuthentication Serverï¼‰è®¤è¯æœåŠ¡å™¨ KDCï¼ˆKey Distribution Centerï¼‰å¯†é’¥åˆ†å‘ä¸­å¿ƒ TGTï¼ˆTicket Granting Ticketï¼‰ç¥¨æ®æˆæƒç¥¨æ®ï¼Œç»™ç¥¨æ®æˆæƒçš„ç¥¨æ® TGSï¼ˆTicket Granting Serviceï¼‰ç¥¨æ®æˆæƒæœåŠ¡ SSï¼ˆService Serverï¼‰æœåŠ¡æä¾›æœåŠ¡å™¨ STï¼ˆServer Ticketï¼‰æœåŠ¡ç«¯ç¥¨æ® ä¸€èˆ¬KDCåŒæ—¶åŒ…å«ASå’ŒTGS\nä¸‰ã€KerberoséªŒè¯è¿‡ç¨‹ Clientç™»å½•ï¼Œç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œä¼šç”¨å•å‘å‡½æ•°æ ¹æ®å¯†ç ç”Ÿæˆå®¢æˆ·ç«¯å¯†é’¥ï¼ˆClient Secret Keyï¼‰\nClientå‘ASå‘é€Aæ¶ˆæ¯è¯·æ±‚TGT\nAæ¶ˆæ¯å†…å®¹ ç”¨æˆ·å è¯·æ±‚æœåŠ¡åç§°ï¼Œè¿™é‡Œæ˜¯TGS ç½‘ç»œåœ°å€ è¯·æ±‚TGTçš„ç”Ÿå‘½å‘¨æœŸ è¯¥æ¶ˆæ¯ä¸ä¼šåŠ å¯†ï¼Œä¹Ÿä¸ä¼šå‘é€å¯†ç æˆ–è€…å¯†ç ç”Ÿæˆçš„å¯†é’¥ ASæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ASç”¨æˆ·åæ•°æ®åº“å†…ï¼Œå¹¶ä½¿ç”¨æ•°æ®åº“ä¸­ç”¨æˆ·å¯†ç ç”Ÿæˆçš„NTLMå“ˆå¸Œè§£å¯†å®¢æˆ·ç«¯æ¶ˆæ¯\nå¦‚æœæ•°æ®åº“å†…æœ‰è¯¥ç”¨æˆ·ååˆ™éšæœºç”ŸæˆTGSä¼šè¯å¯†é’¥ï¼ˆTGS Session Keyï¼‰ï¼ŒåŒæ—¶ç»™Clientç«¯å‘é€ä¸¤æ¡æ¶ˆæ¯\nBæ¶ˆæ¯å†…å®¹ç”¨å®¢æˆ·ç«¯å¯†é’¥åŠ å¯† TGSåç§° æ—¶é—´æˆ³ ç”Ÿå‘½å‘¨æœŸ TGSä¼šè¯å¯†é’¥ï¼ˆTGS Session Keyï¼‰ Cæ¶ˆæ¯å†…å®¹ï¼ˆTGTï¼‰ç”¨TGSå¯†é’¥ï¼ˆTGS Secret Keyï¼‰åŠ å¯† ç”¨æˆ·å TGSåç§° æ—¶é—´æˆ³ ç”¨æˆ·ç½‘ç»œåœ°å€ ç”Ÿå‘½å‘¨æœŸ TGSä¼šè¯å¯†é’¥ï¼ˆTGS Session Keyï¼‰ Clientç”¨é€šè¿‡å¯†ç ç”Ÿæˆçš„å®¢æˆ·ç«¯å¯†é’¥è§£å¯†Bæ¶ˆæ¯ï¼Œå¦‚æœå¯†ç æ­£ç¡®åˆ™å¯ä»¥å¾—åˆ°TGSä¼šè¯å¯†é’¥ï¼ˆTGS Session Keyï¼‰ï¼Œå°†Cæ¶ˆæ¯ï¼ˆTGTï¼‰å­˜å‚¨åœ¨æœ¬åœ°å‡­æ®ç¼“å­˜å†…ã€‚\nClientå‘TGSè¯·æ±‚STï¼ŒæœŸé—´éœ€è¦å‘TGSå‘é€ä¸¤æ¡æ¶ˆæ¯æ˜æ–‡\nDæ¶ˆæ¯å†…å®¹ æƒ³è¦è¯·æ±‚çš„æœåŠ¡IDå³SS ç”Ÿå‘½å‘¨æœŸ TGT Eæ¶ˆæ¯å†…å®¹ä½¿ç”¨TGSä¼šè¯å¯†é’¥ï¼ˆTGS Session Keyï¼‰åŠ å¯†å³èº«ä»½éªŒè¯å™¨ ç”¨æˆ·å æ—¶é—´æˆ³ TGSéªŒè¯Clientè¯·æ±‚æœåŠ¡æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™è¿›å…¥ä¸‹ä¸€æ­¥ã€‚\nTGSæå–Dæ¶ˆæ¯å†…çš„TGTï¼Œç”¨TGSå¯†é’¥è§£å¯†ï¼ˆTGS Secret Keyï¼‰ï¼Œä»ä¸­æå–TGSä¼šè¯å¯†é’¥ï¼ˆTGS Session Keyï¼‰ï¼Œå†ç”¨TGSä¼šè¯å¯†é’¥è§£å¯†Eå¾—åˆ°ç”¨æˆ·åå’Œæ—¶é—´æˆ³ï¼Œç°åœ¨TGSå¾—åˆ°äº†ç”¨æˆ·åå’Œæ¶ˆæ¯Eçš„æ—¶é—´æˆ³ï¼Œä»¥åŠæ¶ˆæ¯Cçš„ç”¨æˆ·åå’Œæ—¶é—´æˆ³\næ¯”è¾ƒä¸¤ä¸ªç”¨æˆ·åå’Œæ—¶é—´æˆ³ æ£€æŸ¥TGTç”Ÿå‘½å‘¨æœŸæ˜¯å¦è¿‡æœŸ æ£€æŸ¥èº«ä»½éªŒè¯å™¨ï¼ˆEæ¶ˆæ¯ï¼‰æ˜¯å¦åœ¨ç¼“å­˜å†…(å­˜ç–‘) TGSç”ŸæˆéšæœºæœåŠ¡ä¼šè¯ï¼ˆservice session keyï¼‰å¯†é’¥ï¼Œå¹¶å‘é€ä¸¤æ¡æ¶ˆæ¯ç»™Client\nFæ¶ˆæ¯å†…å®¹ç”¨æœåŠ¡å¯†é’¥(Service Secret Key)åŠ å¯† ç”¨æˆ·å æœåŠ¡å æ—¶é—´æˆ³ ç½‘ç»œåœ°å€ ç”Ÿå‘½å‘¨æœŸ æœåŠ¡ä¼šè¯å¯†é’¥ Gæ¶ˆæ¯å†…å®¹ç”¨TGSä¼šè¯å¯†é’¥åŠ å¯† æœåŠ¡å æ—¶é—´æˆ³ ç”Ÿå‘½å‘¨æœŸ æœåŠ¡ä¼šè¯å¯†é’¥ å› ä¸ºClientæœ‰TGSä¼šè¯å¯†é’¥æ‰€ä»¥å¯ä»¥è§£å¯†æ¶ˆæ¯Gå¾—åˆ°æœåŠ¡ä¼šè¯å¯†é’¥ï¼ˆservice session keyï¼‰\nå®¢æˆ·ç«¯å’ŒSSè¿æ¥ï¼Œå‘é€ä¸¤æ¡æ¶ˆæ¯\næ¶ˆæ¯Hç”¨æœåŠ¡ä¼šè¯å¯†é’¥åŠ å¯†å†…å®¹èº«ä»½éªŒè¯å™¨ï¼š ç”¨æˆ·å æ—¶é—´æˆ³ æ¶ˆæ¯L å³æ¶ˆæ¯F SSæ”¶åˆ°è¯·æ±‚ï¼Œç”¨æœåŠ¡å¯†é’¥è§£å¯†æ¶ˆæ¯Iå³æ¶ˆæ¯Få¾—åˆ°æœåŠ¡ä¼šè¯å¯†é’¥åŠç”¨æˆ·åæ—¶é—´æˆ³ç­‰ä¿¡æ¯ï¼Œå†ç”¨æœåŠ¡ä¼šè¯å¯†é’¥è§£å¯†æ¶ˆæ¯Hå¾—åˆ°ç”¨æˆ·åå’Œæ—¶é—´æˆ³\nSSè¿›è¡Œèº«ä»½éªŒè¯\næ¯”è¾ƒæ¶ˆæ¯Hå†…ç”¨æˆ·åå’Œæ¶ˆæ¯Få†…çš„ç”¨æˆ·å æ¯”è¾ƒæ¶ˆæ¯Hå’Œæ¶ˆæ¯Få†…çš„æ˜¯æ—¶é—´æˆ³ æ£€æŸ¥æ¶ˆæ¯Få†…ç”Ÿå‘½å‘¨æœŸ æ£€æŸ¥èº«ä»½éªŒè¯å™¨æ˜¯å¦åœ¨ç¼“å­˜å†… SSå‘ClientéªŒè¯èº«ä»½ï¼Œå‘å…¶å‘é€æ¶ˆæ¯\næ¶ˆæ¯Jä½¿ç”¨æœåŠ¡ä¼šè¯å¯†é’¥åŠ å¯†èº«ä»½éªŒè¯å™¨ æœåŠ¡ID æ—¶é—´æˆ³ï¼ˆåœ¨æ¶ˆæ¯Hå†…çš„æ—¶é—´æˆ³ï¼‰ å®¢æˆ·ç«¯æ”¶åˆ°SSçš„èº«ä»½éªŒè¯å™¨æ¶ˆæ¯ï¼ˆJï¼‰ï¼Œä½¿ç”¨ç¼“å­˜å†…çš„æœåŠ¡ä¼šè¯å¯†é’¥è¿›è¡Œè§£å¯†å¾—åˆ°æœåŠ¡IDåŠæ—¶é—´æˆ³ï¼Œå¹¶éªŒè¯æ˜¯å¦æœ‰æ•ˆ\nå‚è€ƒé“¾æ¥\nhttps://www.vanimpe.eu/2017/05/26/kerberos-made-easy/ https://zh.wikipedia.org/wiki/Kerberos http://www.nosqlnotes.com/technotes/kerberos-protocol/ https://juejin.im/post/6844903955416219661\nç®€åŒ–æ¨¡å‹ Clientå‘ASå‘é€æ˜æ–‡æ¶ˆæ¯ï¼Œç”³è¯·è®¿é—®çš„æœåŠ¡ ASæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨æœ¬åœ°æ•°æ®åº“ä¸­ï¼Œå­˜åœ¨åˆ™è¿”å›ä¸¤æ¡æ¶ˆæ¯ Aï¼šClient/TGSä¼šè¯å¯†é’¥(Client/TGS Session Key)ç”¨äºClientå’ŒTGSé€šä¿¡ï¼Œé€šè¿‡ç”¨æˆ·å¯†é’¥åŠ å¯† Bï¼šTGTï¼ˆåŒ…å«Client/TGSä¼šè¯å¯†é’¥ã€ç”¨æˆ·ã€ç”¨æˆ·ç½‘ç»œåœ°å€ã€TGTæœ‰æ•ˆæœŸï¼‰ï¼Œé€šè¿‡TGSå¯†é’¥åŠ å¯† Clientæ”¶åˆ°æ¶ˆæ¯ABï¼Œç”¨è‡ªå·±çš„ç”¨æˆ·å¯†é’¥è§£å¯†æ¶ˆæ¯Aå¾—åˆ°å’ŒTGSé€šä¿¡çš„å¯†é’¥TGSä¼šè¯å¯†é’¥ Clientå‘TGSè¯·æ±‚æœåŠ¡ï¼Œå‘é€ä¸¤æ¡æ¶ˆæ¯ Cï¼šæ¶ˆæ¯Bå’Œç”³è¯·çš„æœåŠ¡IDï¼ˆæ˜æ–‡ï¼‰ Dï¼šè®¤è¯ç¬¦ï¼ˆåŒ…æ‹¬ç”¨æˆ·IDã€æ—¶é—´æˆ³ï¼‰é€šè¿‡(Client/TGS Session Key)åŠ å¯† TGSæ‹¿åˆ°æœåŠ¡IDæ£€æŸ¥æ˜¯å¦æœ‰è¯¥æœåŠ¡ï¼Œå¦‚æœæœ‰è¯¥æœåŠ¡åˆ™ç”¨TGSå¯†é’¥è§£å¯†æ¶ˆæ¯Bå¾—åˆ°(Client/TGS Session Key)å†ç”¨TGSä¼šè¯å¯†é’¥è§£å¯†æ¶ˆæ¯Då¾—åˆ°ç”¨æˆ·IDã€æ—¶é—´æˆ³ï¼Œä¸TGTå†…çš„ç”¨æˆ·IDå’Œæ—¶é—´æˆ³æ¯”å¯¹éªŒè¯æœ‰æ•ˆæ€§ã€‚ é€šè¿‡ä¹‹åTGSè¿”å›ä¸¤æ¡æ¶ˆæ¯ç»™Client Eï¼šSTï¼ˆSSä¼šè¯å¯†é’¥ã€ç”¨æˆ·IDã€ç”¨æˆ·ç½‘ç»œåœ°å€ã€æœ‰æ•ˆæœŸï¼‰é€šè¿‡SSå¯†é’¥åŠ å¯† Fï¼šSSä¼šè¯å¯†é’¥ï¼Œé€šè¿‡TGSä¼šè¯å¯†é’¥åŠ å¯† Clienté€šè¿‡TGSä¼šè¯å¯†é’¥è§£å¯†æ¶ˆæ¯Få¾—åˆ°SSä¼šè¯å¯†é’¥ Clientç»™SSå‘é€ä¸¤æ¡æ¶ˆæ¯ Gï¼šå³æ¶ˆæ¯E Hï¼šè®¤è¯ç¬¦ï¼ŒåŒ…å«ç”¨æˆ·IDï¼Œæ—¶é—´æˆ³ï¼Œé€šè¿‡SSä¼šè¯å¯†é’¥åŠ å¯† SSæ”¶åˆ°ä¸¤æ¡æ¶ˆæ¯ä¹‹åç”¨SSå¯†é’¥è§£å¯†æ¶ˆæ¯Gï¼ˆEï¼‰å¾—åˆ°SSä¼šè¯å¯†é’¥ï¼Œåœ¨é€šè¿‡ä¼šè¯å¯†é’¥è§£å¯†æ¶ˆæ¯Hå¾—åˆ°ç”¨æˆ·IDã€æ—¶é—´æˆ³ç­‰ä¿¡æ¯ï¼Œå¦‚æœå’Œæ¶ˆæ¯Gï¼ˆEï¼‰å†…çš„æ—¶é—´æˆ³å’Œç”¨æˆ·IDæ¯”å¯¹ï¼Œé€šè¿‡åˆ™è¿”å›æ¶ˆæ¯ç»™Client Iï¼šæ¶ˆæ¯Hå†…çš„æ—¶é—´æˆ³ï¼Œé€šè¿‡SSä¼šè¯å¯†é’¥åŠ å¯† Clientæ”¶åˆ°æ¶ˆæ¯ä¹‹åç”¨SSä¼šè¯å¯†é’¥è§£å¯†å¾—åˆ°æ—¶é—´æˆ³ï¼Œå¹¶éªŒè¯ï¼Œé€šè¿‡åˆ™å¯ä»¥å‘SSå‘é€è¯·æ±‚ã€‚ "},{"uri":"https://www.ch35tnut.site/zh-cn/others/how-to-reset-password-administrator-on-windows-server-2019/","title":"åœ¨Windows server 2019ä¸Šé‡ç½®å¯†ç ","tags":[],"description":"","content":"é‡ç½®windows server 2019çš„administratorå¯†ç  ä¹‹å‰åœ¨Vmwareä¸Šçš„Windows server 2019çš„Administratorå¯†ç å¿˜è®°äº†ï¼Œä½¿ç”¨ç½‘ä¸Šçš„æ–¹æ³•æ—¶æ‰¾ä¸åˆ°ç”¨PEå¯åŠ¨ç³»ç»Ÿçš„åŠæ³•ï¼Œæ— å¥ˆåªèƒ½ä½¿ç”¨å…¶ä»–åŠæ³•ã€‚å†™æ­¤æ–‡è®°å½•ä¸€ä¸‹ã€‚\nè®¾ç½®CD/DVD é¦–å…ˆåœ¨è™šæ‹Ÿæœº-è®¾ç½®çš„ç¡¬ä»¶é€‰é¡¹å¡ä¸‹é¢çš„CD/DVDè®¾ç½®ä¸ºä½¿ç”¨ISOæ˜ åƒæ–‡ä»¶å¹¶æ‰¾åˆ°windows server 2019é•œåƒä½ç½®ï¼Œå¦‚ä¸‹å›¾\nä¹‹åé€‰æ‹©è™šæ‹Ÿæœº-ç”µæº-å¼€æœºæ—¶æ‰“å¼€å›ºä»¶å¯åŠ¨è™šæ‹Ÿæœºï¼Œè™šæ‹Ÿæœºå°±ä¼šè¿›å…¥BIOSï¼Œåœ¨BIOSé‡Œé€‰æ‹©CD/DVDå¯åŠ¨ï¼Œå³ä¼šè¿›å…¥ä¸‹å›¾ã€‚\nå‚è€ƒé“¾æ¥\nhttps://www.osradar.com/how-to-reset-password-administrator-on-windows-server-2019/\n"},{"uri":"https://www.ch35tnut.site/zh-cn/misc/tunnel/application-layer/ssh-tunnel/","title":"SSHéš§é“","tags":[],"description":"","content":"SSHéš§é“ SSHæä¾›äº†ä¸‰ç§è½¬å‘æ¨¡å¼ï¼šæœ¬åœ°ç«¯å£è½¬å‘ã€è¿œç¨‹ç«¯å£è½¬å‘ä»¥åŠåŠ¨æ€ç«¯å£è½¬å‘ï¼Œæœ¬æ–‡å°†ä»‹ç»è¿™ä¸‰ç§è½¬å‘æ¨¡å¼çš„ç”¨æ³•ã€‚\nä¸€äº›åŸºæœ¬æ¦‚å¿µ æœ¬åœ°ä¸»æœºï¼šSSHå®¢æˆ·ç«¯æ‰€åœ¨çš„ä¸»æœºã€‚\nè¿œç¨‹ä¸»æœºï¼šç›¸å¯¹äºæœ¬åœ°ä¸»æœºçš„æ¦‚å¿µï¼Œåœ¨æœ¬åœ°ä¸»æœºä¹‹å¤–çš„ä¸»æœºå«è¿œç¨‹ä¸»æœºã€‚\nSSHå‘½ä»¤è¡Œå‚æ•°è§£é‡Š\n-C:å‹ç¼©ä¼ è¾“ï¼Œæé«˜ä¼ è¾“é€Ÿåº¦ -f:å°†sshè½¬å…¥åå°æ‰§è¡Œ -N:å»ºç«‹é™é»˜è¿æ¥ï¼ˆè¿æ¥åçœ‹ä¸åˆ°å…·ä½“ä¼šè¯ï¼‰ -g:å…è®¸è¿œç¨‹ä¸»æœºè¿æ¥æœ¬åœ°ç”¨äºè½¬å‘çš„ç«¯å£ -L:æœ¬åœ°ç«¯å£è½¬å‘ -R:è¿œç¨‹ç«¯å£è½¬å‘ æœ¬åœ°ç«¯å£è½¬å‘ æœ¬åœ°ç«¯å£è½¬å‘ï¼Œå³å°†æœ¬åœ°ç«¯å£è½¬å‘åˆ°è¿œç¨‹ä¸»æœºä¸Šï¼Œå‘½ä»¤æ ¼å¼ï¼šssh -L \u0026lt;local port\u0026gt;:\u0026lt;remote host\u0026gt;:\u0026lt;remote port\u0026gt; \u0026lt;username\u0026gt;@\u0026lt;SSH hostname\u0026gt;\nä¸¾ä¾‹ï¼š\nSSH Client IP:x.x.x.x SSH Server IP:a.b.c.d åœ¨SSH Clientè¿è¡Œå‘½ä»¤ssh -CfNg -L 127.0.0.1:1313:127.0.0.1:1313 root@a.b.c.d ï¼Œå°†127.0.0.1:1313ç«¯å£è½¬å‘åˆ°SSH Serverçš„127.0.0.1:1313ç«¯å£ä¸Šã€‚æ­¤æ—¶SSH Clientè®¿é—®127.0.0.1:1313çš„ç»“æœè·Ÿè®¿é—®åœ¨SSH Serverç«¯çš„127.0.0.1:1313ç»“æœä¸€æ ·ã€‚\nåœ¨SSH Clientä¸Š\næ­¤æ—¶åœ¨SSH Clientä¸Šçš„sshä¼šç›‘å¬127.0.0.1:1313è¿™ä¸ªç«¯å£ï¼Œè¯¥ç«¯å£çš„TCPæ•°æ®é€šè¿‡sshéš§é“ä¼ è¾“åˆ°SSH serverä¸Šã€‚\nåœ¨SSH Serverä¸Šï¼Œå…ˆç›‘å¬127.0.0.1:1313ç«¯å£ï¼Œæœ¬æ–‡ç›‘å¬ä½¿ç”¨hugo å¯åŠ¨ä¸€ä¸ªserverã€‚\nåœ¨SSH Clientä¸Šä½¿ç”¨curl 127.0.0.1:1313å‘½ä»¤æ—¶è¿”å›çš„å†…å®¹å³ä¸ºSSH Serverä¸Š127.0.0.1:1313çš„å†…å®¹\nåŒæ—¶æœ¬åœ°ç«¯å£è½¬å‘å‘½ä»¤ä¸­remote ipä¸æ­¢é™åˆ¶åœ¨127.0.0.1ä¸Šï¼Œremote ipå¯ä»¥æ˜¯ä»»ä½•ä¸€ä¸ªSSH Serverèƒ½å¤Ÿè¿æ¥çš„hostï¼Œå®é™…ä¸Šæœ¬åœ°ç«¯å£è½¬å‘è¿‡ç¨‹ä¸­ï¼Œå®é™…ä¸Šæ˜¯æŠŠSSH Serverå½“ä½œè·³æ¿æœºï¼Œè¿é€šSSH Clientå’ŒSSH Serverå¦å¤–ä¸€ç«¯çš„ä¸»æœºï¼Œå¦‚ä¸‹ï¼š\n|SSH Client| \u0026lt;-------------\u0026gt;|SSH Server| \u0026lt;--------------\u0026gt;|SSH Clientä¸èƒ½è®¿é—®ä½†æ˜¯SSH Serverèƒ½è®¿é—®çš„ä¸»æœº|\næœ¬åœ°ç«¯å£è½¬å‘ä¸€èˆ¬åº”ç”¨åœºæ™¯ä¸ºåœ¨æ¸—é€æµ‹è¯•è¿‡ç¨‹ä¸­æ§åˆ¶äº†ç›®æ ‡ç½‘ç»œä¸­å¸¦æœ‰SSH Serverçš„ä¸€å°æœºå™¨ï¼Œé€šè¿‡è¿™å°æœºå™¨åšä¸ºè·³æ¿æœºæ¥è®¿é—®å†…ç½‘å…¶ä»–ä¸»æœºä¸Šçš„æœåŠ¡ã€‚ä¸€å®šç¨‹åº¦ä¸Šè§„é¿é˜²ç«å¢™çš„æµé‡å‘Šè­¦ï¼ˆå› ä¸ºsshæµé‡ä¸ºåŠ å¯†æµé‡ï¼‰\nè¿œç¨‹ç«¯å£è½¬å‘ã€‚ è¿œç¨‹ç«¯å£è½¬å‘å³å’Œæœ¬åœ°ç«¯å£è½¬å‘æ˜¯ç›¸åçš„æ¦‚å¿µï¼Œæœ¬åœ°ç«¯å£è½¬å‘æ˜¯å°†æœ¬åœ°ç«¯å£è½¬å‘åˆ°è¿œç¨‹ç«¯å£ä¸Šï¼Œè¿æ¥æœ¬åœ°ç«¯å£å³è·Ÿè¿æ¥è¿œç¨‹ç«¯å£ä¸€ä¸ªæ•ˆæœã€‚è€Œè¿œç¨‹ç«¯å£è½¬å‘å³å°†è¿œç¨‹ç«¯å£è½¬å‘åˆ°æœ¬åœ°ï¼Œä½¿å¾—è¿æ¥è¿œç¨‹ç«¯å£å³è·Ÿè¿æ¥æœ¬åœ°ç«¯å£ä¸€æ ·ã€‚å‘½ä»¤æ ¼å¼ï¼šssh -R \u0026lt;remote port\u0026gt;:\u0026lt;local ip\u0026gt;:\u0026lt;local port\u0026gt; \u0026lt;username\u0026gt;@\u0026lt;SSH hostname\u0026gt;\nä¸¾ä¾‹ï¼š\nSSH Client IP:x.x.x.x SSH Server IP:a.b.c.d æœ¬æ¬¡æˆ‘ä»¬å°†SSH Clientçš„3389ç«¯å£è½¬å‘åˆ°SSH Serverï¼ˆå…¬ç½‘æœåŠ¡å™¨ï¼‰ä¸Šï¼Œä½¿å¾—å¦å¤–ä¸€å°æœºå™¨èƒ½å¤Ÿé€šè¿‡SSH Serverçš„ç«¯å£è¿æ¥åˆ°ä½äºå±€åŸŸç½‘çš„SSH Clientçš„è¿œç¨‹æ¡Œé¢ã€‚\nåœ¨ssh clientä¸Šè¿è¡Œå‘½ä»¤\næ­¤æ—¶ä»»ä½•è¿æ¥SSH Server:9898çš„è¯·æ±‚éƒ½ä¼šè¢«è½¬å‘åˆ°SSH Clientçš„58989ç«¯å£ä¸Šï¼Œè¯¥ç«¯å£ç›‘å¬çš„æœåŠ¡ä¸ºè¿œç¨‹æ¡Œé¢æœåŠ¡ã€‚åœ¨å¦å¤–ä¸€å°ç”µè„‘ï¼ˆä¸åŒäºSSH Serverå’ŒSSH Clientï¼‰ä½¿ç”¨è¿œç¨‹æ¡Œé¢è¿æ¥SSH Server:9898\nåŒæœ¬åœ°ç«¯å£è½¬å‘ä¸€æ ·ï¼Œè¿œç¨‹ç«¯å£è½¬å‘å‘½ä»¤ä¸­çš„local ipå¯ä»¥æ˜¯ä»»ä½•ä¸€ä¸ªSSH Clientèƒ½å¤Ÿè¿æ¥çš„hostï¼Œæ­¤æ—¶SSH Clientè¢«å½“ä½œè·³æ¿æœºï¼Œè¿é€šSSH Clientå¦å¤–ä¸€ç«¯å’ŒSSH Serverç«¯çš„ä¸»æœºã€‚\n|SSH Serveèƒ½å¤Ÿè¿é€šçš„ä¸»æœº| \u0026lt;--------------\u0026gt; |SSH Client| \u0026lt;--------------\u0026gt; |SSH Clientèƒ½è®¿é—®ä½†æ˜¯SSH Serverä¸èƒ½è®¿é—®çš„ä¸»æœº|\nè¿œç¨‹ç«¯å£è½¬å‘åº”ç”¨åœºæ™¯ä¸€èˆ¬æ˜¯å°†å±€åŸŸç½‘çš„æŸäº›æœåŠ¡é€šè¿‡SSHéš§é“æš´éœ²åœ¨å…¬ç½‘ä¸Šï¼Œæˆ–è€…åœ¨æ¸—é€æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæ§åˆ¶äº†å†…ç½‘çš„æŸå°ä¸»æœºï¼Œé€šè¿‡è¿œç¨‹ç«¯å£è½¬å‘ï¼Œå°†è¯¥ä¸»æœºä½œä¸ºè·³æ¿æœºæ¥è®¿é—®å†…ç½‘å…¶ä»–æœåŠ¡ï¼Œå› ä¸ºæ­¤æ—¶SSHæ˜¯ä»å†…ç½‘è¿æ¥åˆ°å¤–ç½‘ï¼Œåœ¨æµé‡ä¸Šæ²¡æœ‰é‚£ä¹ˆå¯ç–‘ã€‚\nåŠ¨æ€ç«¯å£è½¬å‘ åœ¨æœ¬åœ°ç«¯å£è½¬å‘å’Œè¿œç¨‹ç«¯å£è½¬å‘è¿‡ç¨‹ä¸­ï¼Œä¸€æ¬¡æ€§åªèƒ½è½¬å‘ä¸€ä¸ªç«¯å£ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹æ•ˆç‡å¤ªä½äº†ï¼Œè€ŒåŠ¨æ€ç«¯å£è½¬å‘æ²¡æœ‰æŒ‡å®šç›®çš„ç«¯å£ï¼Œç›¸å¯¹äºå‰ä¸¤ç§æ¥è¯´æ›´çµæ´»ã€‚å®é™…ä¸ŠåŠ¨æ€ç«¯å£è½¬å‘å³ä¸ºSSHå®ç°çš„SOCKSåè®®ã€‚å‘½ä»¤æ ¼å¼:ssh -D port \u0026lt;username\u0026gt;@\u0026lt;SSH host\u0026gt;ã€‚\nåœ¨SSH Clientæ‰§è¡Œå‘½ä»¤å³å¯åœ¨SSH Clientå’ŒSSH Serverä¹‹é—´å»ºç«‹socks5éš§é“ï¼ŒSSH Clientå¯ä»¥è¿æ¥è¯¥éš§é“æ¥ä¼ è¾“æ•°æ®ã€‚\nç»„åˆåˆ©ç”¨ åœ¨ä¸€äº›æƒ…å†µä¸‹å¯ä»¥é€šè¿‡ç»„åˆä¸Šé¢ä¸‰ç§è½¬å‘æ¥è¾¾åˆ°æ„æƒ³ä¸åˆ°çš„æ•ˆæœã€‚\nä¾‹å¦‚ï¼Œæœ‰ä¸¤å°ä½äºäº’ä¸ç›¸é€šçš„å±€åŸŸç½‘ä¸»æœºï¼Œå¦‚æœä¸€å°æƒ³è¦è®¿é—®å¦å¤–ä¸€å°èƒ½å¤Ÿè®¿é—®çš„æœåŠ¡æ—¶ï¼Œå¯ä»¥ä»¥ä¸‹é¢çš„æ–¹å¼è¾¾åˆ°ç›®çš„\nåœ¨ä¸»æœº1ä¸Šæ‰§è¡Œå‘½ä»¤ ssh -CfNg -R 9898:192.168.50.1:22 root\u0026lt;SSH Server\u0026gt; å°†ä¸»æœº1çš„sshç«¯å£è½¬å‘åˆ°å…¬ç½‘æœåŠ¡å™¨çš„9898ç«¯å£ã€‚\nåœ¨ä¸»æœº2æ‰§è¡Œå‘½ä»¤ssh -D 12222 -p 9898 \u0026lt;username\u0026gt;@\u0026lt;SSH Server\u0026gt; æ­¤æ—¶sshè¿æ¥çš„æ˜¯ä¸»æœº1ï¼Œä¸”å»ºç«‹äº†sockséš§é“ï¼Œé€šè¿‡è¯¥éš§é“ä¸»æœº2å¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨ä¸»æœº1èƒ½è®¿é—®è€Œä¸»æœº2ä¸èƒ½ç›´æ¥è®¿é—®çš„æœåŠ¡ã€‚\n"},{"uri":"https://www.ch35tnut.site/zh-cn/others/vmware-based-implementation-of-small-domain-network-construction/","title":"åŸºäºVmwareçš„å°å‹åŸŸç½‘ç»œæ­å»º","tags":[],"description":"","content":"åŸºäºVmwareçš„å°å‹åŸŸç½‘ç»œæ­å»º æ‘˜è¦ åœ¨æ¸—é€çš„æ—¥å¸¸å­¦ä¹ è¿‡ç¨‹ä¸­ç»å¸¸éœ€è¦ä¸€ä¸ªå†…ç½‘ç¯å¢ƒï¼Œæœ¬ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•ä½¿ç”¨Vmwareå’ŒMikroTikæ­å»ºç®€æ˜“çš„äºŒå±‚å†…ç½‘ç¯å¢ƒã€‚\nç½‘ç»œç»“æ„ æ•´ä¸ªç½‘ç»œåˆ†ä¸ºç»“æ„åˆ†ä¸ºä¸‰å±‚ï¼Œç¬¬ä¸€å±‚æ¨¡æ‹Ÿå¤–ç½‘ç¯å¢ƒï¼Œç¬¬äºŒå±‚ä¸ºDMZåŒºåŸŸï¼Œè¯¥åŒºåŸŸé€šè¿‡è¾¹ç•Œè·¯ç”±å™¨çš„ç«¯å£æ˜ å°„ï¼Œå°†ç¬¬äºŒå±‚ç½‘ç»œä¸»æœºçš„ä¸€äº›ç«¯å£æ˜ å°„åˆ°è¾¹ç•Œè·¯ç”±å™¨ä¸Šå¯¹å¤–æä¾›æœåŠ¡ï¼Œç¬¬ä¸‰å±‚æ¨¡æ‹ŸåŠå…¬ç½‘ï¼Œè¯¥å±‚ç½‘ç»œä¸ºåŸŸç½‘ç»œï¼ŒåŒæ—¶å¯ä»¥æ§åˆ¶ç¬¬äºŒå±‚ç½‘ç»œçš„ä¸»æœºã€‚\næ•´ä¸ªç½‘ç»œæ‹“æ‰‘å›¾å¦‚ä¸‹ï¼š\nIPè®¾ç½®ï¼š\nç¬¬ä¸€å±‚ç½‘ç»œä¸ºï¼ˆå¤–ç½‘ï¼‰ï¼š192.168.59.0/24\nç¬¬äºŒå±‚ç½‘ç»œä¸ºï¼ˆDMZåŒºåŸŸï¼‰ï¼š192.168.72.0/24\nç¬¬ä¸‰å±‚ç½‘ç»œä¸ºï¼ˆåŠå…¬ç½‘ï¼‰ï¼š172.16.2.0/24\nè·¯ç”±å™¨IPåœ°å€ï¼š\nè¾¹ç•Œè·¯ç”±å™¨ï¼š192.168.59.141 | 192.168.72.2\nå†…ç½‘è·¯ç”±å™¨ï¼š192.168.72.254 | 172.16.2.254\nç½‘ç»œæ­å»º ç½‘ç»œè®¾ç½® é¦–å…ˆä½¿ç”¨VMwareçš„è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨å¢åŠ ä¸¤ä¸ªç½‘ç»œVMnet2ã€VMnet3ï¼Œéƒ½å‹¾é€‰ä»…ä¸»æœºæ¨¡å¼ï¼ŒåŒæ—¶å–æ¶ˆä¸‹é¢ä¸¤ä¸ªå‹¾ï¼Œå¦‚ä¸‹å›¾ï¼š\nVMnet3åŒç†ï¼ŒåŒæ—¶åœ¨DHCPè®¾ç½®å¤„è®¾ç½®ç›¸åº”çš„IPåœ°å€å’Œæ©ç ã€‚å…¶ä¸­å¤–å±‚ç½‘ç»œä¸ºnatæ¨¡å¼ï¼ŒVMnet2ä¸ºDMZåŒºåŸŸç½‘ç»œï¼ŒVMnet3ä¸ºåŠå…¬ç½‘ç»œ\nè™šæ‹Ÿæœºæ­å»º æ•´ä¸ªç½‘ç»œåœ¨æœ€å°‘æƒ…å†µä¸‹ä¸€å…±éœ€è¦å…­å°è™šæ‹Ÿæœºï¼Œåˆ†ä¸ºä¸¤å°ROSï¼Œå››å°ç½‘ç»œä¸­çš„ä¸»æœºã€‚\nROSä»hxxps://mikrotik.com/downloadä¸‹è½½stableç‰ˆæœ¬çš„ovaæ ¼å¼çš„é•œåƒï¼Œä¹‹åå¯¼å…¥åˆ°VMwareä¸­ã€‚ä¸€å…±éœ€è¦å¯¼å…¥ä¸¤æ¬¡ï¼Œåˆ†åˆ«å‘½åä¸ºROSï¼ŒROS-1ã€‚é™¤äº†ä¸‹è½½é•œåƒä¹‹å¤–è¿˜éœ€è¦ä¸‹è½½winboxæ–¹ä¾¿å¯¹è·¯ç”±å™¨è¿›è¡Œè®¾ç½®ã€‚\nç½‘ç»œä¸­ä¸»æœºåˆ†å¸ƒï¼š\nDMZï¼šUbuntu 2004ã€windows7\nåŠå…¬ç½‘ï¼šWindows server2019ã€windows7\nåˆ›å»ºä¸Šè¿°è™šæ‹Ÿæœºï¼Œå¹¶å°†DMZåŒºåŸŸçš„ä¸»æœºçš„ç½‘å¡è®¾ç½®ä¸ºVMnet2ï¼ŒåŠå…¬ç½‘çš„ä¸»æœºè®¾ç½®ä¸ºVMnet3.\nå°†è¾¹ç•Œè·¯ç”±å™¨ROSç½‘å¡è®¾ç½®ä¸ºnetæ¨¡å¼å’ŒVMnet2æ¨¡å¼ï¼Œå†…ç½‘è·¯ç”±å™¨è®¾ç½®ä¸ºVMnet2å’ŒVMnet3æ¨¡å¼ã€‚\nIPåœ°å€åŠè·¯ç”±å™¨è®¾ç½® ç»å†ä¸Šé¢çš„æ­¥éª¤ä¹‹åï¼ŒåŸºæœ¬çš„ç½‘ç»œæ‹“æ‰‘å·²ç»æ­å»ºå®Œæˆï¼Œæ¥ä¸‹æ¥éœ€è¦å¯¹ç½‘ç»œå†…çš„ä¸»æœºå’Œè·¯ç”±å™¨è¿›è¡Œè®¾ç½®ä½¿å¾—ç½‘ç»œä¸­çš„ä¸»æœºèƒ½å¤Ÿç›¸äº’pingé€šã€‚\né¦–å…ˆè®¾ç½®ä¸¤ä¸ªç½‘ç»œä¸­çš„ä¸»æœºIPåœ°å€\nDMZï¼š\nWindows7ï¼š192.168.72.4/24 ç½‘å…³192.168.72.2 DNS114.114.114.114\nUbuntu ï¼š192.168.72.3/24 ç½‘å…³192.168.72.2 DNS114.\n114.114.114\nåŠå…¬ç½‘ï¼š\nWindows server 2019ï¼š172.16.2.4/24 ç½‘å…³172.16. 2.254 DNS127.0.0.1\nwindows7ï¼š172.16.2.3/24 ç½‘å…³172.16.2.254 DNS172.16.2.4\nè‡³æ­¤ï¼Œä¸¤ä¸ªç½‘ç»œçš„ä¸»æœºåº”è¯¥å¯ä»¥pingé€šåŒä¸€ä¸ªç½‘ç»œçš„ä¸»æœºã€‚æ¥ä¸‹æ¥è®¾ç½®ä¸¤ä¸ªROSçš„IPåœ°å€ã€‚\næ‰“å¼€winboxï¼Œç‚¹å‡»NeighborsæŒ‰é’®ï¼Œä¼šè‡ªåŠ¨å—…æ¢ç½‘ç»œå†…çš„å­˜æ´»çš„è·¯ç”±å™¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nä¸Šå›¾ä¸ºè¾¹ç•Œè·¯ç”±å™¨çš„IPåœ°å€ï¼Œå¦‚æœåˆ†é…äº†IPåœ°å€åˆ™å¯ä»¥åœ¨æµè§ˆå™¨é€šè¿‡IPåœ°å€æµè§ˆè·¯ç”±å™¨çš„webç•Œé¢ï¼Œåœ¨å¦‚æœæ²¡æœ‰åˆ†é…IPåœ°å€åˆ™é€šè¿‡wibboxä½¿ç”¨MACåœ°å€ç™»å½•\nè¿›å…¥ä¹‹åï¼Œåœ¨å·¦ä¾§é€‰é¡¹å¡ä¼šåˆ—å‡ºè·¯ç”±å™¨æ‹¥æœ‰çš„æ‰€æœ‰ç½‘å¡æ¥å£ï¼Œç‚¹å‡»ä¹‹åè¿›å…¥åˆ°æ¥å£è¯¦æƒ…ç•Œé¢ï¼Œåœ¨é‡Œé¢ä¼šåˆ—å‡ºè¯¥æ¥å£çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ç½‘å¡çš„MACåˆ†è¾¨è¯¥ç½‘å¡å¯¹åº”åœ¨vmwareä¸­çš„ç½‘å¡ï¼Œå°†ä¸¤ä¸ªç½‘å¡åç§°åˆ†åˆ«è®¾ç½®ä¸ºether1-wanå’Œether2-lanï¼Œä¹‹ååœ¨ip-\u0026gt;addressesé€‰é¡¹å¡ä¸­å°†ether-lanè®¾ç½®ä¸ºä¸‹å›¾ã€‚ether1-wanä¸ç”¨è®¾ç½®ï¼Œå› ä¸ºè¯¥ç½‘å¡ç½‘ç»œç±»å‹ä¸ºnatä¼šè‡ªåŠ¨dhcpåˆ†é…\nä¹‹ååœ¨IP-\u0026gt;Firewall-\u0026gt;NATä¸­æ–°å»ºè§„åˆ™ï¼Œchainï¼šsrcnatï¼Œout.interface:ether2-lan,action:masquerade\nè¯¥è§„åˆ™å°†ä½¿å¾—è·¯ç”±å™¨ä¸¤è¾¹çš„ç½‘ç»œè”é€šã€‚\nå‚è€ƒ\nhttps://www.huaweicloud.com/articles/401014315f14d0fb8d5e3f5489693621.html http://www.roszj.com/1692.html http://www.irouteros.com/?p=583\n"},{"uri":"https://www.ch35tnut.site/zh-cn/categories/","title":"Categories","tags":[],"description":"","content":""},{"uri":"https://www.ch35tnut.site/zh-cn/tags/","title":"Tags","tags":[],"description":"","content":""}]